{"ast":null,"code":"import React,{useState}from\"react\";import{useWallet}from\"../../hooks/useWallet\";import{motion,AnimatePresence}from\"framer-motion\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SUPPORTED_CHAINS=[{id:1,name:\"Ethereum Mainnet\"},{id:5,name:\"Goerli Testnet\"},{id:11155111,name:\"Sepolia Testnet\"}];const WalletConnect=()=>{const{isConnected,address,chainId,connect,disconnect,switchChain,error}=useWallet();const[isDropdownOpen,setIsDropdownOpen]=useState(false);const[isChainSwitching,setIsChainSwitching]=useState(false);const handleConnect=async()=>{const success=await connect();if(!success&&!SUPPORTED_CHAINS.find(chain=>chain.id===chainId)){// If connection failed due to wrong chain, prompt to switch\nconst confirmed=window.confirm(\"Please switch to a supported network (Ethereum Mainnet, Goerli, or Sepolia)\");if(confirmed){handleChainSwitch(SUPPORTED_CHAINS[0].id);}}};const handleChainSwitch=async targetChainId=>{setIsChainSwitching(true);try{await switchChain(targetChainId);setIsDropdownOpen(false);}catch(err){console.error(\"Chain switch error:\",err);}finally{setIsChainSwitching(false);}};const formatAddress=addr=>{return\"\".concat(addr.slice(0,6),\"...\").concat(addr.slice(-4));};const getCurrentChainName=()=>{const chain=SUPPORTED_CHAINS.find(chain=>chain.id===chainId);return chain?chain.name:\"Unsupported Network\";};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[!isConnected?/*#__PURE__*/_jsx(motion.button,{whileHover:{scale:1.02},whileTap:{scale:0.98},onClick:handleConnect,className:\"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg font-medium transition-colors\",children:\"Connect Wallet\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsDropdownOpen(!isDropdownOpen),className:\"\\n                px-3 py-1.5 rounded-lg text-sm font-medium\\n                \".concat(SUPPORTED_CHAINS.find(chain=>chain.id===chainId)?\"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400\":\"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400\",\"\\n              \"),children:isChainSwitching?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2\"}),\"Switching...\"]}):getCurrentChainName()}),/*#__PURE__*/_jsx(AnimatePresence,{children:isDropdownOpen&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:\"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg py-1 z-50\",children:SUPPORTED_CHAINS.map(chain=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleChainSwitch(chain.id),className:\"\\n                        w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700\\n                        \".concat(chainId===chain.id?\"text-primary-600 dark:text-primary-400 font-medium\":\"text-gray-700 dark:text-gray-300\",\"\\n                      \"),children:chain.name},chain.id))})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsDropdownOpen(!isDropdownOpen),className:\"px-4 py-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg font-medium transition-colors\",children:formatAddress(address)}),/*#__PURE__*/_jsx(AnimatePresence,{children:isDropdownOpen&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:\"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden z-50\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{navigator.clipboard.writeText(address);setIsDropdownOpen(false);},className:\"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300\",children:\"Copy Address\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{disconnect();setIsDropdownOpen(false);},className:\"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-red-600 dark:text-red-400\",children:\"Disconnect\"})]})})]})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:error&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:\"absolute top-full left-0 right-0 mt-2 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-md text-sm\",children:error})})]});};export default WalletConnect;","map":{"version":3,"names":["React","useState","useWallet","motion","AnimatePresence","jsx","_jsx","jsxs","_jsxs","SUPPORTED_CHAINS","id","name","WalletConnect","isConnected","address","chainId","connect","disconnect","switchChain","error","isDropdownOpen","setIsDropdownOpen","isChainSwitching","setIsChainSwitching","handleConnect","success","find","chain","confirmed","window","confirm","handleChainSwitch","targetChainId","err","console","formatAddress","addr","concat","slice","getCurrentChainName","className","children","button","whileHover","scale","whileTap","onClick","div","initial","opacity","y","animate","exit","map","navigator","clipboard","writeText"],"sources":["/home/nishant/Downloads/proofchain/frontend/src/components/WalletConnect/index.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useWallet } from \"../../hooks/useWallet\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nconst SUPPORTED_CHAINS = [\n  { id: 1, name: \"Ethereum Mainnet\" },\n  { id: 5, name: \"Goerli Testnet\" },\n  { id: 11155111, name: \"Sepolia Testnet\" },\n];\n\nconst WalletConnect = () => {\n  const {\n    isConnected,\n    address,\n    chainId,\n    connect,\n    disconnect,\n    switchChain,\n    error,\n  } = useWallet();\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const [isChainSwitching, setIsChainSwitching] = useState(false);\n\n  const handleConnect = async () => {\n    const success = await connect();\n    if (!success && !SUPPORTED_CHAINS.find((chain) => chain.id === chainId)) {\n      // If connection failed due to wrong chain, prompt to switch\n      const confirmed = window.confirm(\n        \"Please switch to a supported network (Ethereum Mainnet, Goerli, or Sepolia)\"\n      );\n      if (confirmed) {\n        handleChainSwitch(SUPPORTED_CHAINS[0].id);\n      }\n    }\n  };\n\n  const handleChainSwitch = async (targetChainId) => {\n    setIsChainSwitching(true);\n    try {\n      await switchChain(targetChainId);\n      setIsDropdownOpen(false);\n    } catch (err) {\n      console.error(\"Chain switch error:\", err);\n    } finally {\n      setIsChainSwitching(false);\n    }\n  };\n\n  const formatAddress = (addr) => {\n    return `${addr.slice(0, 6)}...${addr.slice(-4)}`;\n  };\n\n  const getCurrentChainName = () => {\n    const chain = SUPPORTED_CHAINS.find((chain) => chain.id === chainId);\n    return chain ? chain.name : \"Unsupported Network\";\n  };\n\n  return (\n    <div className=\"relative\">\n      {/* Connect/Disconnect Button */}\n      {!isConnected ? (\n        <motion.button\n          whileHover={{ scale: 1.02 }}\n          whileTap={{ scale: 0.98 }}\n          onClick={handleConnect}\n          className=\"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg font-medium transition-colors\"\n        >\n          Connect Wallet\n        </motion.button>\n      ) : (\n        <div className=\"flex items-center space-x-2\">\n          {/* Network Selector */}\n          <div className=\"relative\">\n            <button\n              onClick={() => setIsDropdownOpen(!isDropdownOpen)}\n              className={`\n                px-3 py-1.5 rounded-lg text-sm font-medium\n                ${\n                  SUPPORTED_CHAINS.find((chain) => chain.id === chainId)\n                    ? \"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400\"\n                    : \"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400\"\n                }\n              `}\n            >\n              {isChainSwitching ? (\n                <div className=\"flex items-center\">\n                  <div className=\"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2\"></div>\n                  Switching...\n                </div>\n              ) : (\n                getCurrentChainName()\n              )}\n            </button>\n\n            {/* Network Dropdown */}\n            <AnimatePresence>\n              {isDropdownOpen && (\n                <motion.div\n                  initial={{ opacity: 0, y: -10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, y: -10 }}\n                  className=\"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg py-1 z-50\"\n                >\n                  {SUPPORTED_CHAINS.map((chain) => (\n                    <button\n                      key={chain.id}\n                      onClick={() => handleChainSwitch(chain.id)}\n                      className={`\n                        w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700\n                        ${\n                          chainId === chain.id\n                            ? \"text-primary-600 dark:text-primary-400 font-medium\"\n                            : \"text-gray-700 dark:text-gray-300\"\n                        }\n                      `}\n                    >\n                      {chain.name}\n                    </button>\n                  ))}\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </div>\n\n          {/* Address Display & Disconnect */}\n          <div className=\"relative\">\n            <button\n              onClick={() => setIsDropdownOpen(!isDropdownOpen)}\n              className=\"px-4 py-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg font-medium transition-colors\"\n            >\n              {formatAddress(address)}\n            </button>\n\n            {/* Account Dropdown */}\n            <AnimatePresence>\n              {isDropdownOpen && (\n                <motion.div\n                  initial={{ opacity: 0, y: -10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, y: -10 }}\n                  className=\"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden z-50\"\n                >\n                  <button\n                    onClick={() => {\n                      navigator.clipboard.writeText(address);\n                      setIsDropdownOpen(false);\n                    }}\n                    className=\"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300\"\n                  >\n                    Copy Address\n                  </button>\n                  <button\n                    onClick={() => {\n                      disconnect();\n                      setIsDropdownOpen(false);\n                    }}\n                    className=\"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-red-600 dark:text-red-400\"\n                  >\n                    Disconnect\n                  </button>\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </div>\n        </div>\n      )}\n\n      {/* Error Message */}\n      <AnimatePresence>\n        {error && (\n          <motion.div\n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -10 }}\n            className=\"absolute top-full left-0 right-0 mt-2 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-md text-sm\"\n          >\n            {error}\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default WalletConnect;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,SAAS,KAAQ,uBAAuB,CACjD,OAASC,MAAM,CAAEC,eAAe,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExD,KAAM,CAAAC,gBAAgB,CAAG,CACvB,CAAEC,EAAE,CAAE,CAAC,CAAEC,IAAI,CAAE,kBAAmB,CAAC,CACnC,CAAED,EAAE,CAAE,CAAC,CAAEC,IAAI,CAAE,gBAAiB,CAAC,CACjC,CAAED,EAAE,CAAE,QAAQ,CAAEC,IAAI,CAAE,iBAAkB,CAAC,CAC1C,CAED,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CACJC,WAAW,CACXC,OAAO,CACPC,OAAO,CACPC,OAAO,CACPC,UAAU,CACVC,WAAW,CACXC,KACF,CAAC,CAAGjB,SAAS,CAAC,CAAC,CACf,KAAM,CAACkB,cAAc,CAAEC,iBAAiB,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACqB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGtB,QAAQ,CAAC,KAAK,CAAC,CAE/D,KAAM,CAAAuB,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,KAAM,CAAAC,OAAO,CAAG,KAAM,CAAAT,OAAO,CAAC,CAAC,CAC/B,GAAI,CAACS,OAAO,EAAI,CAAChB,gBAAgB,CAACiB,IAAI,CAAEC,KAAK,EAAKA,KAAK,CAACjB,EAAE,GAAKK,OAAO,CAAC,CAAE,CACvE;AACA,KAAM,CAAAa,SAAS,CAAGC,MAAM,CAACC,OAAO,CAC9B,6EACF,CAAC,CACD,GAAIF,SAAS,CAAE,CACbG,iBAAiB,CAACtB,gBAAgB,CAAC,CAAC,CAAC,CAACC,EAAE,CAAC,CAC3C,CACF,CACF,CAAC,CAED,KAAM,CAAAqB,iBAAiB,CAAG,KAAO,CAAAC,aAAa,EAAK,CACjDT,mBAAmB,CAAC,IAAI,CAAC,CACzB,GAAI,CACF,KAAM,CAAAL,WAAW,CAACc,aAAa,CAAC,CAChCX,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAE,MAAOY,GAAG,CAAE,CACZC,OAAO,CAACf,KAAK,CAAC,qBAAqB,CAAEc,GAAG,CAAC,CAC3C,CAAC,OAAS,CACRV,mBAAmB,CAAC,KAAK,CAAC,CAC5B,CACF,CAAC,CAED,KAAM,CAAAY,aAAa,CAAIC,IAAI,EAAK,CAC9B,SAAAC,MAAA,CAAUD,IAAI,CAACE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,QAAAD,MAAA,CAAMD,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC,EAChD,CAAC,CAED,KAAM,CAAAC,mBAAmB,CAAGA,CAAA,GAAM,CAChC,KAAM,CAAAZ,KAAK,CAAGlB,gBAAgB,CAACiB,IAAI,CAAEC,KAAK,EAAKA,KAAK,CAACjB,EAAE,GAAKK,OAAO,CAAC,CACpE,MAAO,CAAAY,KAAK,CAAGA,KAAK,CAAChB,IAAI,CAAG,qBAAqB,CACnD,CAAC,CAED,mBACEH,KAAA,QAAKgC,SAAS,CAAC,UAAU,CAAAC,QAAA,EAEtB,CAAC5B,WAAW,cACXP,IAAA,CAACH,MAAM,CAACuC,MAAM,EACZC,UAAU,CAAE,CAAEC,KAAK,CAAE,IAAK,CAAE,CAC5BC,QAAQ,CAAE,CAAED,KAAK,CAAE,IAAK,CAAE,CAC1BE,OAAO,CAAEtB,aAAc,CACvBgB,SAAS,CAAC,mGAAmG,CAAAC,QAAA,CAC9G,gBAED,CAAe,CAAC,cAEhBjC,KAAA,QAAKgC,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAE1CjC,KAAA,QAAKgC,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBnC,IAAA,WACEwC,OAAO,CAAEA,CAAA,GAAMzB,iBAAiB,CAAC,CAACD,cAAc,CAAE,CAClDoB,SAAS,kFAAAH,MAAA,CAGL5B,gBAAgB,CAACiB,IAAI,CAAEC,KAAK,EAAKA,KAAK,CAACjB,EAAE,GAAKK,OAAO,CAAC,CAClD,sEAAsE,CACtE,8DAA8D,oBAEpE,CAAA0B,QAAA,CAEDnB,gBAAgB,cACfd,KAAA,QAAKgC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCnC,IAAA,QAAKkC,SAAS,CAAC,qFAAqF,CAAM,CAAC,eAE7G,EAAK,CAAC,CAEND,mBAAmB,CAAC,CACrB,CACK,CAAC,cAGTjC,IAAA,CAACF,eAAe,EAAAqC,QAAA,CACbrB,cAAc,eACbd,IAAA,CAACH,MAAM,CAAC4C,GAAG,EACTC,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAC,EAAG,CAAE,CAChCC,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAE,CAC9BE,IAAI,CAAE,CAAEH,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAC,EAAG,CAAE,CAC7BV,SAAS,CAAC,qFAAqF,CAAAC,QAAA,CAE9FhC,gBAAgB,CAAC4C,GAAG,CAAE1B,KAAK,eAC1BrB,IAAA,WAEEwC,OAAO,CAAEA,CAAA,GAAMf,iBAAiB,CAACJ,KAAK,CAACjB,EAAE,CAAE,CAC3C8B,SAAS,mIAAAH,MAAA,CAGLtB,OAAO,GAAKY,KAAK,CAACjB,EAAE,CAChB,oDAAoD,CACpD,kCAAkC,4BAExC,CAAA+B,QAAA,CAEDd,KAAK,CAAChB,IAAI,EAXNgB,KAAK,CAACjB,EAYL,CACT,CAAC,CACQ,CACb,CACc,CAAC,EACf,CAAC,cAGNF,KAAA,QAAKgC,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBnC,IAAA,WACEwC,OAAO,CAAEA,CAAA,GAAMzB,iBAAiB,CAAC,CAACD,cAAc,CAAE,CAClDoB,SAAS,CAAC,0HAA0H,CAAAC,QAAA,CAEnIN,aAAa,CAACrB,OAAO,CAAC,CACjB,CAAC,cAGTR,IAAA,CAACF,eAAe,EAAAqC,QAAA,CACbrB,cAAc,eACbZ,KAAA,CAACL,MAAM,CAAC4C,GAAG,EACTC,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAC,EAAG,CAAE,CAChCC,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAE,CAC9BE,IAAI,CAAE,CAAEH,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAC,EAAG,CAAE,CAC7BV,SAAS,CAAC,gGAAgG,CAAAC,QAAA,eAE1GnC,IAAA,WACEwC,OAAO,CAAEA,CAAA,GAAM,CACbQ,SAAS,CAACC,SAAS,CAACC,SAAS,CAAC1C,OAAO,CAAC,CACtCO,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAE,CACFmB,SAAS,CAAC,8GAA8G,CAAAC,QAAA,CACzH,cAED,CAAQ,CAAC,cACTnC,IAAA,WACEwC,OAAO,CAAEA,CAAA,GAAM,CACb7B,UAAU,CAAC,CAAC,CACZI,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAE,CACFmB,SAAS,CAAC,4GAA4G,CAAAC,QAAA,CACvH,YAED,CAAQ,CAAC,EACC,CACb,CACc,CAAC,EACf,CAAC,EACH,CACN,cAGDnC,IAAA,CAACF,eAAe,EAAAqC,QAAA,CACbtB,KAAK,eACJb,IAAA,CAACH,MAAM,CAAC4C,GAAG,EACTC,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAC,EAAG,CAAE,CAChCC,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAE,CAC9BE,IAAI,CAAE,CAAEH,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAC,EAAG,CAAE,CAC7BV,SAAS,CAAC,0HAA0H,CAAAC,QAAA,CAEnItB,KAAK,CACI,CACb,CACc,CAAC,EACf,CAAC,CAEV,CAAC,CAED,cAAe,CAAAP,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}