{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{motion,AnimatePresence}from\"framer-motion\";import{useParams,Link,useNavigate}from\"react-router-dom\";import useWallet from\"../../hooks/useWallet\";import useTheme from\"../../hooks/useTheme\";import{getUserProfile,getUserVotingHistory,getUserReputationHistory,getTokenBalance,getSupportedTokens}from\"../../utils/api\";import{Line}from\"react-chartjs-2\";import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend}from\"chart.js\";// Register ChartJS components\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend);const Profile=()=>{var _profile$username,_profile$username$;const{address:userAddress}=useParams();const{address:connectedAddress}=useWallet();const{isDarkMode}=useTheme();const navigate=useNavigate();const[profile,setProfile]=useState(null);const[votingHistory,setVotingHistory]=useState([]);const[reputationHistory,setReputationHistory]=useState([]);const[tokenBalances,setTokenBalances]=useState({});const[supportedTokens,setSupportedTokens]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[activeTab,setActiveTab]=useState(\"overview\");const address=userAddress||connectedAddress;useEffect(()=>{// If no address is provided and the user isn't connected, redirect to home\nif(!address){navigate(\"/\");return;}const fetchProfileData=async()=>{try{setLoading(true);setError(null);// Fetch all profile data in parallel\nconst[profileData,votingData,reputationData,tokensData]=await Promise.all([getUserProfile(address),getUserVotingHistory(address),getUserReputationHistory(address),getSupportedTokens()]);setProfile(profileData);setVotingHistory(votingData);setReputationHistory(reputationData);setSupportedTokens(tokensData);// Fetch token balances for supported tokens\nconst balances={};for(const token of tokensData){// Use token.id or tokenType or index as a fallback\nconst tokenId=token.id||token.tokenType||token._id;if(tokenId){try{const balance=await getTokenBalance(address,tokenId);balances[tokenId]=balance;}catch(err){console.error(\"Error fetching balance for token \".concat(tokenId,\":\"),err);// Continue with other tokens even if one fails\n}}}setTokenBalances(balances);}catch(err){console.error(\"Error fetching profile data:\",err);setError(\"Failed to load profile data. Please try again later.\");}finally{setLoading(false);}};fetchProfileData();},[address,navigate]);// This effect will re-render the component when the theme changes\n// ensuring chart colors update properly\nuseEffect(()=>{// No need to do anything, just re-render when isDarkMode changes\n},[isDarkMode]);// Calculate reputation level based on reputation score\nconst getReputationLevel=score=>{if(score>=900)return{level:\"Expert\",color:\"text-purple-600 dark:text-purple-400\"};if(score>=700)return{level:\"Advanced\",color:\"text-blue-600 dark:text-blue-400\"};if(score>=500)return{level:\"Intermediate\",color:\"text-green-600 dark:text-green-400\"};if(score>=300)return{level:\"Regular\",color:\"text-yellow-600 dark:text-yellow-400\"};return{level:\"Novice\",color:\"text-gray-600 dark:text-gray-400\"};};// Calculate statistics from voting history\nconst calculateStats=()=>{if(!votingHistory||!votingHistory.length){return{totalVotes:0,correctVotes:0,accuracyRate:0,averageConfidence:0,totalStaked:0};}// Filter finalized votes - safely access nested properties\nconst finalizedVotes=votingHistory.filter(vote=>vote&&vote.isFinalized===true);// Filter correct votes - safely checking against winning option\nconst correctVotes=finalizedVotes.filter(vote=>vote&&vote.vote!==null&&vote.winningOption!==undefined&&vote.vote===vote.winningOption);// Calculate total staked amount\nconst totalStaked=votingHistory.reduce((sum,vote)=>sum+(vote&&vote.stakeAmount?Number(vote.stakeAmount):0),0);// Calculate confidence sum\nconst confidenceSum=votingHistory.reduce((sum,vote)=>sum+(vote&&vote.confidence?Number(vote.confidence):0),0);return{totalVotes:votingHistory.length,correctVotes:correctVotes.length,accuracyRate:finalizedVotes.length>0?correctVotes.length/finalizedVotes.length*100:0,averageConfidence:votingHistory.length>0?confidenceSum/votingHistory.length:0,totalStaked};};const stats=calculateStats();if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-6 rounded-lg max-w-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-2\",children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),className:\"mt-4 px-4 py-2 bg-red-100 dark:bg-red-900/40 rounded-md hover:bg-red-200 dark:hover:bg-red-900/60 transition-colors\",children:\"Try Again\"})]})});}if(!profile){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-white mb-2\",children:\"Profile Not Found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"The requested profile could not be found.\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"mt-4 inline-block px-4 py-2 bg-primary-100 dark:bg-primary-900/40 text-primary-600 dark:text-primary-400 rounded-md hover:bg-primary-200 dark:hover:bg-primary-900/60 transition-colors\",children:\"Return Home\"})]})});}const reputationInfo=getReputationLevel(profile.reputationScore||0);const reputationScore=profile.reputationScore||0;// Define chart config inside render to ensure it updates with theme changes\nconst reputationChartConfig={data:{labels:reputationHistory&&reputationHistory.length>0?reputationHistory.map(item=>item&&item.timestamp?new Date(item.timestamp).toLocaleDateString():\"N/A\"):[],datasets:[{label:\"Reputation Score\",data:reputationHistory&&reputationHistory.length>0?reputationHistory.map(item=>item&&item.score?item.score:0):[],borderColor:isDarkMode?\"rgb(129, 140, 248)\":\"rgb(99, 102, 241)\",backgroundColor:isDarkMode?\"rgba(129, 140, 248, 0.1)\":\"rgba(99, 102, 241, 0.1)\",fill:true,tension:0.4}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false},title:{display:true,text:\"Reputation History\",color:isDarkMode?\"#e5e7eb\":\"#111827\"},tooltip:{enabled:true,mode:\"index\",intersect:false,backgroundColor:isDarkMode?\"rgba(17, 24, 39, 0.8)\":\"rgba(255, 255, 255, 0.8)\",titleColor:isDarkMode?\"#e5e7eb\":\"#111827\",bodyColor:isDarkMode?\"#e5e7eb\":\"#111827\",borderColor:isDarkMode?\"rgba(255, 255, 255, 0.2)\":\"rgba(0, 0, 0, 0.1)\",borderWidth:1}},scales:{y:{beginAtZero:true,grid:{color:isDarkMode?\"rgba(255, 255, 255, 0.1)\":\"rgba(0, 0, 0, 0.1)\"},ticks:{color:isDarkMode?\"#e5e7eb\":\"#111827\"}},x:{grid:{color:isDarkMode?\"rgba(255, 255, 255, 0.1)\":\"rgba(0, 0, 0, 0.1)\"},ticks:{color:isDarkMode?\"#e5e7eb\":\"#111827\",maxRotation:45,minRotation:0}}}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-white\",children:((_profile$username=profile.username)===null||_profile$username===void 0?void 0:(_profile$username$=_profile$username[0])===null||_profile$username$===void 0?void 0:_profile$username$.toUpperCase())||address.slice(2,4).toUpperCase()})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:profile.username||\"\".concat(address.slice(0,6),\"...\").concat(address.slice(-4))}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:address}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-yellow-500\",children:[\"★\".repeat(Math.floor(reputationScore/200)),\"☆\".repeat(5-Math.floor(reputationScore/200))]}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-sm \".concat(reputationInfo.color),children:[reputationInfo.level,\" \\xB7 Level\",\" \",Math.floor(reputationScore/100)+1]})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200 dark:border-gray-700 mb-8\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"flex space-x-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab(\"overview\"),className:\"pb-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab===\"overview\"?\"border-primary-500 text-primary-600 dark:text-primary-400\":\"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300\"),children:\"Overview\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab(\"voting\"),className:\"pb-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab===\"voting\"?\"border-primary-500 text-primary-600 dark:text-primary-400\":\"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300\"),children:\"Voting History\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab(\"reputation\"),className:\"pb-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab===\"reputation\"?\"border-primary-500 text-primary-600 dark:text-primary-400\":\"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300\"),children:\"Reputation\"})]})}),/*#__PURE__*/_jsxs(AnimatePresence,{mode:\"wait\",children:[activeTab===\"overview\"&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"grid grid-cols-1 md:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4 text-gray-900 dark:text-white\",children:\"Statistics\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:\"Total Votes\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:stats.totalVotes})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:\"Consensus Rate\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:[stats.accuracyRate.toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:\"Average Confidence\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:[stats.averageConfidence.toFixed(1),\"/10\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4 text-gray-900 dark:text-white\",children:\"Token Balances\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[supportedTokens.map(token=>{var _token$symbol,_tokenBalances$tokenI;const tokenId=token.id||token.tokenType||token._id;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full flex items-center justify-center\",style:{backgroundColor:token.color||\"#6366f1\"},children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-sm font-medium\",children:((_token$symbol=token.symbol)===null||_token$symbol===void 0?void 0:_token$symbol[0])||\"?\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 dark:text-white\",children:token.name||\"Unknown Token\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:token.symbol||\"???\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 dark:text-white\",children:((_tokenBalances$tokenI=tokenBalances[tokenId])===null||_tokenBalances$tokenI===void 0?void 0:_tokenBalances$tokenI.toFixed(2))||\"0.00\"})]},tokenId||\"token-\".concat(supportedTokens.indexOf(token)));}),supportedTokens.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:\"No tokens available\"})]})]})]},\"overview\"),activeTab===\"voting\"&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"bg-white dark:bg-gray-800 rounded-lg shadow-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4 text-gray-900 dark:text-white\",children:\"Voting History\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:votingHistory.length>0?votingHistory.map((vote,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900 dark:text-white\",children:vote.title||\"Content #\".concat(vote.contentId||index+1)}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:[\"Vote:\",\" \",vote.vote!==null&&vote.vote!==undefined?typeof vote.vote===\"boolean\"?vote.vote?\"Approve\":\"Reject\":vote.vote:\"Pending\",\" \",\"\\u2022\",vote.confidence!==null&&vote.confidence!==undefined?\" Confidence: \".concat(vote.confidence,\"/10\"):\"\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:vote.commitTimestamp?new Date(vote.commitTimestamp).toLocaleDateString():vote.timestamp?new Date(vote.timestamp).toLocaleDateString():\"N/A\"}),vote.isFinalized&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(vote.wasSuccessful?\"text-green-600 dark:text-green-400\":\"text-red-600 dark:text-red-400\"),children:vote.wasSuccessful?\"Matched Consensus\":\"Differed from Consensus\"})]})]},vote.id||\"\".concat(vote.contentId,\"-\").concat(vote.commitTimestamp)||\"vote-\".concat(index))):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500 dark:text-gray-400\",children:\"No voting history available\"})})]})},\"voting\"),activeTab===\"reputation\"&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4 text-gray-900 dark:text-white\",children:\"Reputation Growth\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-80\",children:reputationHistory&&reputationHistory.length>0?/*#__PURE__*/_jsx(Line,{data:reputationChartConfig.data||{labels:[],datasets:[]},options:reputationChartConfig.options||{},height:80}):/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 dark:text-gray-400\",children:\"No reputation history available\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4 text-gray-900 dark:text-white\",children:\"Reputation Breakdown\"}),profile&&profile.reputationBreakdown?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:\"Consensus Participation\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900 dark:text-white\",children:[\"+\",profile.reputationBreakdown.consensusParticipation||0,\" \",\"points\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:\"Correct Predictions\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900 dark:text-white\",children:[\"+\",profile.reputationBreakdown.correctPredictions||0,\" \",\"points\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:\"Content Submissions\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900 dark:text-white\",children:[\"+\",profile.reputationBreakdown.contentSubmissions||0,\" \",\"points\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:\"Community Rewards\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900 dark:text-white\",children:[\"+\",profile.reputationBreakdown.communityRewards||0,\" \",\"points\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-4 border-t border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900 dark:text-white\",children:\"Total Score\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-900 dark:text-white\",children:[reputationScore,\" points\"]})]})})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500 dark:text-gray-400\",children:\"No reputation data available\"})]})]},\"reputation\")]})]});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","useParams","Link","useNavigate","useWallet","useTheme","getUserProfile","getUserVotingHistory","getUserReputationHistory","getTokenBalance","getSupportedTokens","Line","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","jsx","_jsx","jsxs","_jsxs","register","Profile","_profile$username","_profile$username$","address","userAddress","connectedAddress","isDarkMode","navigate","profile","setProfile","votingHistory","setVotingHistory","reputationHistory","setReputationHistory","tokenBalances","setTokenBalances","supportedTokens","setSupportedTokens","loading","setLoading","error","setError","activeTab","setActiveTab","fetchProfileData","profileData","votingData","reputationData","tokensData","Promise","all","balances","token","tokenId","id","tokenType","_id","balance","err","console","concat","getReputationLevel","score","level","color","calculateStats","length","totalVotes","correctVotes","accuracyRate","averageConfidence","totalStaked","finalizedVotes","filter","vote","isFinalized","winningOption","undefined","reduce","sum","stakeAmount","Number","confidenceSum","confidence","stats","className","children","onClick","window","location","reload","to","reputationInfo","reputationScore","reputationChartConfig","data","labels","map","item","timestamp","Date","toLocaleDateString","datasets","label","borderColor","backgroundColor","fill","tension","options","responsive","maintainAspectRatio","plugins","legend","display","title","text","tooltip","enabled","mode","intersect","titleColor","bodyColor","borderWidth","scales","y","beginAtZero","grid","ticks","x","maxRotation","minRotation","username","toUpperCase","slice","repeat","Math","floor","div","initial","opacity","animate","exit","toFixed","_token$symbol","_tokenBalances$tokenI","style","symbol","name","indexOf","index","contentId","commitTimestamp","wasSuccessful","height","reputationBreakdown","consensusParticipation","correctPredictions","contentSubmissions","communityRewards"],"sources":["/home/nishant/Downloads/proofchain/frontend/src/pages/Profile/index.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\nimport useWallet from \"../../hooks/useWallet\";\nimport useTheme from \"../../hooks/useTheme\";\nimport {\n  getUserProfile,\n  getUserVotingHistory,\n  getUserReputationHistory,\n  getTokenBalance,\n  getSupportedTokens,\n} from \"../../utils/api\";\nimport { Line } from \"react-chartjs-2\";\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n} from \"chart.js\";\n\n// Register ChartJS components\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\nconst Profile = () => {\n  const { address: userAddress } = useParams();\n  const { address: connectedAddress } = useWallet();\n  const { isDarkMode } = useTheme();\n  const navigate = useNavigate();\n  const [profile, setProfile] = useState(null);\n  const [votingHistory, setVotingHistory] = useState([]);\n  const [reputationHistory, setReputationHistory] = useState([]);\n  const [tokenBalances, setTokenBalances] = useState({});\n  const [supportedTokens, setSupportedTokens] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [activeTab, setActiveTab] = useState(\"overview\");\n\n  const address = userAddress || connectedAddress;\n\n  useEffect(() => {\n    // If no address is provided and the user isn't connected, redirect to home\n    if (!address) {\n      navigate(\"/\");\n      return;\n    }\n\n    const fetchProfileData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        // Fetch all profile data in parallel\n        const [profileData, votingData, reputationData, tokensData] =\n          await Promise.all([\n            getUserProfile(address),\n            getUserVotingHistory(address),\n            getUserReputationHistory(address),\n            getSupportedTokens(),\n          ]);\n\n        setProfile(profileData);\n        setVotingHistory(votingData);\n        setReputationHistory(reputationData);\n        setSupportedTokens(tokensData);\n\n        // Fetch token balances for supported tokens\n        const balances = {};\n        for (const token of tokensData) {\n          // Use token.id or tokenType or index as a fallback\n          const tokenId = token.id || token.tokenType || token._id;\n          if (tokenId) {\n            try {\n              const balance = await getTokenBalance(address, tokenId);\n              balances[tokenId] = balance;\n            } catch (err) {\n              console.error(\n                `Error fetching balance for token ${tokenId}:`,\n                err\n              );\n              // Continue with other tokens even if one fails\n            }\n          }\n        }\n        setTokenBalances(balances);\n      } catch (err) {\n        console.error(\"Error fetching profile data:\", err);\n        setError(\"Failed to load profile data. Please try again later.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProfileData();\n  }, [address, navigate]);\n\n  // This effect will re-render the component when the theme changes\n  // ensuring chart colors update properly\n  useEffect(() => {\n    // No need to do anything, just re-render when isDarkMode changes\n  }, [isDarkMode]);\n\n  // Calculate reputation level based on reputation score\n  const getReputationLevel = (score) => {\n    if (score >= 900)\n      return { level: \"Expert\", color: \"text-purple-600 dark:text-purple-400\" };\n    if (score >= 700)\n      return { level: \"Advanced\", color: \"text-blue-600 dark:text-blue-400\" };\n    if (score >= 500)\n      return {\n        level: \"Intermediate\",\n        color: \"text-green-600 dark:text-green-400\",\n      };\n    if (score >= 300)\n      return {\n        level: \"Regular\",\n        color: \"text-yellow-600 dark:text-yellow-400\",\n      };\n    return { level: \"Novice\", color: \"text-gray-600 dark:text-gray-400\" };\n  };\n\n  // Calculate statistics from voting history\n  const calculateStats = () => {\n    if (!votingHistory || !votingHistory.length) {\n      return {\n        totalVotes: 0,\n        correctVotes: 0,\n        accuracyRate: 0,\n        averageConfidence: 0,\n        totalStaked: 0,\n      };\n    }\n\n    // Filter finalized votes - safely access nested properties\n    const finalizedVotes = votingHistory.filter(\n      (vote) => vote && vote.isFinalized === true\n    );\n\n    // Filter correct votes - safely checking against winning option\n    const correctVotes = finalizedVotes.filter(\n      (vote) =>\n        vote &&\n        vote.vote !== null &&\n        vote.winningOption !== undefined &&\n        vote.vote === vote.winningOption\n    );\n\n    // Calculate total staked amount\n    const totalStaked = votingHistory.reduce(\n      (sum, vote) =>\n        sum + (vote && vote.stakeAmount ? Number(vote.stakeAmount) : 0),\n      0\n    );\n\n    // Calculate confidence sum\n    const confidenceSum = votingHistory.reduce(\n      (sum, vote) =>\n        sum + (vote && vote.confidence ? Number(vote.confidence) : 0),\n      0\n    );\n\n    return {\n      totalVotes: votingHistory.length,\n      correctVotes: correctVotes.length,\n      accuracyRate:\n        finalizedVotes.length > 0\n          ? (correctVotes.length / finalizedVotes.length) * 100\n          : 0,\n      averageConfidence:\n        votingHistory.length > 0 ? confidenceSum / votingHistory.length : 0,\n      totalStaked,\n    };\n  };\n\n  const stats = calculateStats();\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-6 rounded-lg max-w-lg\">\n          <h3 className=\"text-lg font-semibold mb-2\">Error</h3>\n          <p>{error}</p>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"mt-4 px-4 py-2 bg-red-100 dark:bg-red-900/40 rounded-md hover:bg-red-200 dark:hover:bg-red-900/60 transition-colors\"\n          >\n            Try Again\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n            Profile Not Found\n          </h3>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            The requested profile could not be found.\n          </p>\n          <Link\n            to=\"/\"\n            className=\"mt-4 inline-block px-4 py-2 bg-primary-100 dark:bg-primary-900/40 text-primary-600 dark:text-primary-400 rounded-md hover:bg-primary-200 dark:hover:bg-primary-900/60 transition-colors\"\n          >\n            Return Home\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  const reputationInfo = getReputationLevel(profile.reputationScore || 0);\n  const reputationScore = profile.reputationScore || 0;\n\n  // Define chart config inside render to ensure it updates with theme changes\n  const reputationChartConfig = {\n    data: {\n      labels:\n        reputationHistory && reputationHistory.length > 0\n          ? reputationHistory.map((item) =>\n              item && item.timestamp\n                ? new Date(item.timestamp).toLocaleDateString()\n                : \"N/A\"\n            )\n          : [],\n      datasets: [\n        {\n          label: \"Reputation Score\",\n          data:\n            reputationHistory && reputationHistory.length > 0\n              ? reputationHistory.map((item) =>\n                  item && item.score ? item.score : 0\n                )\n              : [],\n          borderColor: isDarkMode ? \"rgb(129, 140, 248)\" : \"rgb(99, 102, 241)\",\n          backgroundColor: isDarkMode\n            ? \"rgba(129, 140, 248, 0.1)\"\n            : \"rgba(99, 102, 241, 0.1)\",\n          fill: true,\n          tension: 0.4,\n        },\n      ],\n    },\n    options: {\n      responsive: true,\n      maintainAspectRatio: false,\n      plugins: {\n        legend: {\n          display: false,\n        },\n        title: {\n          display: true,\n          text: \"Reputation History\",\n          color: isDarkMode ? \"#e5e7eb\" : \"#111827\",\n        },\n        tooltip: {\n          enabled: true,\n          mode: \"index\",\n          intersect: false,\n          backgroundColor: isDarkMode\n            ? \"rgba(17, 24, 39, 0.8)\"\n            : \"rgba(255, 255, 255, 0.8)\",\n          titleColor: isDarkMode ? \"#e5e7eb\" : \"#111827\",\n          bodyColor: isDarkMode ? \"#e5e7eb\" : \"#111827\",\n          borderColor: isDarkMode\n            ? \"rgba(255, 255, 255, 0.2)\"\n            : \"rgba(0, 0, 0, 0.1)\",\n          borderWidth: 1,\n        },\n      },\n      scales: {\n        y: {\n          beginAtZero: true,\n          grid: {\n            color: isDarkMode\n              ? \"rgba(255, 255, 255, 0.1)\"\n              : \"rgba(0, 0, 0, 0.1)\",\n          },\n          ticks: {\n            color: isDarkMode ? \"#e5e7eb\" : \"#111827\",\n          },\n        },\n        x: {\n          grid: {\n            color: isDarkMode\n              ? \"rgba(255, 255, 255, 0.1)\"\n              : \"rgba(0, 0, 0, 0.1)\",\n          },\n          ticks: {\n            color: isDarkMode ? \"#e5e7eb\" : \"#111827\",\n            maxRotation: 45,\n            minRotation: 0,\n          },\n        },\n      },\n    },\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 py-8\">\n      {/* Profile Header */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8\">\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"flex-shrink-0\">\n            <div className=\"w-20 h-20 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-full flex items-center justify-center\">\n              <span className=\"text-2xl font-bold text-white\">\n                {profile.username?.[0]?.toUpperCase() ||\n                  address.slice(2, 4).toUpperCase()}\n              </span>\n            </div>\n          </div>\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n              {profile.username ||\n                `${address.slice(0, 6)}...${address.slice(-4)}`}\n            </h1>\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n              {address}\n            </p>\n            <div className=\"mt-2 flex items-center\">\n              <div className=\"flex items-center text-yellow-500\">\n                {\"★\".repeat(Math.floor(reputationScore / 200))}\n                {\"☆\".repeat(5 - Math.floor(reputationScore / 200))}\n              </div>\n              <span className={`ml-2 text-sm ${reputationInfo.color}`}>\n                {reputationInfo.level} · Level{\" \"}\n                {Math.floor(reputationScore / 100) + 1}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Navigation Tabs */}\n      <div className=\"border-b border-gray-200 dark:border-gray-700 mb-8\">\n        <nav className=\"flex space-x-8\">\n          <button\n            onClick={() => setActiveTab(\"overview\")}\n            className={`pb-4 px-1 border-b-2 font-medium text-sm ${\n              activeTab === \"overview\"\n                ? \"border-primary-500 text-primary-600 dark:text-primary-400\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300\"\n            }`}\n          >\n            Overview\n          </button>\n          <button\n            onClick={() => setActiveTab(\"voting\")}\n            className={`pb-4 px-1 border-b-2 font-medium text-sm ${\n              activeTab === \"voting\"\n                ? \"border-primary-500 text-primary-600 dark:text-primary-400\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300\"\n            }`}\n          >\n            Voting History\n          </button>\n          <button\n            onClick={() => setActiveTab(\"reputation\")}\n            className={`pb-4 px-1 border-b-2 font-medium text-sm ${\n              activeTab === \"reputation\"\n                ? \"border-primary-500 text-primary-600 dark:text-primary-400\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300\"\n            }`}\n          >\n            Reputation\n          </button>\n        </nav>\n      </div>\n\n      {/* Tab Content */}\n      <AnimatePresence mode=\"wait\">\n        {activeTab === \"overview\" && (\n          <motion.div\n            key=\"overview\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"grid grid-cols-1 md:grid-cols-2 gap-8\"\n          >\n            {/* Statistics */}\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\">\n              <h2 className=\"text-lg font-semibold mb-4 text-gray-900 dark:text-white\">\n                Statistics\n              </h2>\n              <div className=\"space-y-4\">\n                <div>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                    Total Votes\n                  </p>\n                  <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                    {stats.totalVotes}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                    Consensus Rate\n                  </p>\n                  <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                    {stats.accuracyRate.toFixed(1)}%\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                    Average Confidence\n                  </p>\n                  <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                    {stats.averageConfidence.toFixed(1)}/10\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* Token Balances */}\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\">\n              <h2 className=\"text-lg font-semibold mb-4 text-gray-900 dark:text-white\">\n                Token Balances\n              </h2>\n              <div className=\"space-y-4\">\n                {supportedTokens.map((token) => {\n                  const tokenId = token.id || token.tokenType || token._id;\n                  return (\n                    <div\n                      key={tokenId || `token-${supportedTokens.indexOf(token)}`}\n                      className=\"flex justify-between items-center\"\n                    >\n                      <div className=\"flex items-center\">\n                        <div\n                          className=\"w-8 h-8 rounded-full flex items-center justify-center\"\n                          style={{ backgroundColor: token.color || \"#6366f1\" }}\n                        >\n                          <span className=\"text-white text-sm font-medium\">\n                            {token.symbol?.[0] || \"?\"}\n                          </span>\n                        </div>\n                        <div className=\"ml-3\">\n                          <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                            {token.name || \"Unknown Token\"}\n                          </p>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                            {token.symbol || \"???\"}\n                          </p>\n                        </div>\n                      </div>\n                      <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                        {tokenBalances[tokenId]?.toFixed(2) || \"0.00\"}\n                      </p>\n                    </div>\n                  );\n                })}\n                {supportedTokens.length === 0 && (\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                    No tokens available\n                  </p>\n                )}\n              </div>\n            </div>\n          </motion.div>\n        )}\n\n        {activeTab === \"voting\" && (\n          <motion.div\n            key=\"voting\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md\"\n          >\n            <div className=\"p-6\">\n              <h2 className=\"text-lg font-semibold mb-4 text-gray-900 dark:text-white\">\n                Voting History\n              </h2>\n              <div className=\"space-y-4\">\n                {votingHistory.length > 0 ? (\n                  votingHistory.map((vote, index) => (\n                    <div\n                      key={\n                        vote.id ||\n                        `${vote.contentId}-${vote.commitTimestamp}` ||\n                        `vote-${index}`\n                      }\n                      className=\"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg\"\n                    >\n                      <div>\n                        <p className=\"font-medium text-gray-900 dark:text-white\">\n                          {vote.title ||\n                            `Content #${vote.contentId || index + 1}`}\n                        </p>\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                          Vote:{\" \"}\n                          {vote.vote !== null && vote.vote !== undefined\n                            ? typeof vote.vote === \"boolean\"\n                              ? vote.vote\n                                ? \"Approve\"\n                                : \"Reject\"\n                              : vote.vote\n                            : \"Pending\"}{\" \"}\n                          •\n                          {vote.confidence !== null &&\n                          vote.confidence !== undefined\n                            ? ` Confidence: ${vote.confidence}/10`\n                            : \"\"}\n                        </p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                          {vote.commitTimestamp\n                            ? new Date(\n                                vote.commitTimestamp\n                              ).toLocaleDateString()\n                            : vote.timestamp\n                            ? new Date(vote.timestamp).toLocaleDateString()\n                            : \"N/A\"}\n                        </p>\n                        {vote.isFinalized && (\n                          <p\n                            className={`text-sm ${\n                              vote.wasSuccessful\n                                ? \"text-green-600 dark:text-green-400\"\n                                : \"text-red-600 dark:text-red-400\"\n                            }`}\n                          >\n                            {vote.wasSuccessful\n                              ? \"Matched Consensus\"\n                              : \"Differed from Consensus\"}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <p className=\"text-center text-gray-500 dark:text-gray-400\">\n                    No voting history available\n                  </p>\n                )}\n              </div>\n            </div>\n          </motion.div>\n        )}\n\n        {activeTab === \"reputation\" && (\n          <motion.div\n            key=\"reputation\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"space-y-8\"\n          >\n            {/* Reputation Chart */}\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\">\n              <h2 className=\"text-lg font-semibold mb-4 text-gray-900 dark:text-white\">\n                Reputation Growth\n              </h2>\n              <div className=\"h-80\">\n                {reputationHistory && reputationHistory.length > 0 ? (\n                  <Line\n                    data={\n                      reputationChartConfig.data || { labels: [], datasets: [] }\n                    }\n                    options={reputationChartConfig.options || {}}\n                    height={80}\n                  />\n                ) : (\n                  <div className=\"flex items-center justify-center h-full\">\n                    <p className=\"text-gray-500 dark:text-gray-400\">\n                      No reputation history available\n                    </p>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Reputation Breakdown */}\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\">\n              <h2 className=\"text-lg font-semibold mb-4 text-gray-900 dark:text-white\">\n                Reputation Breakdown\n              </h2>\n              {profile && profile.reputationBreakdown ? (\n                <div className=\"space-y-4\">\n                  <div className=\"flex justify-between items-center\">\n                    <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                      Consensus Participation\n                    </p>\n                    <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                      +{profile.reputationBreakdown.consensusParticipation || 0}{\" \"}\n                      points\n                    </p>\n                  </div>\n                  <div className=\"flex justify-between items-center\">\n                    <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                      Correct Predictions\n                    </p>\n                    <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                      +{profile.reputationBreakdown.correctPredictions || 0}{\" \"}\n                      points\n                    </p>\n                  </div>\n                  <div className=\"flex justify-between items-center\">\n                    <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                      Content Submissions\n                    </p>\n                    <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                      +{profile.reputationBreakdown.contentSubmissions || 0}{\" \"}\n                      points\n                    </p>\n                  </div>\n                  <div className=\"flex justify-between items-center\">\n                    <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                      Community Rewards\n                    </p>\n                    <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                      +{profile.reputationBreakdown.communityRewards || 0}{\" \"}\n                      points\n                    </p>\n                  </div>\n                  <div className=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\n                    <div className=\"flex justify-between items-center\">\n                      <p className=\"font-medium text-gray-900 dark:text-white\">\n                        Total Score\n                      </p>\n                      <p className=\"font-medium text-gray-900 dark:text-white\">\n                        {reputationScore} points\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                <p className=\"text-center text-gray-500 dark:text-gray-400\">\n                  No reputation data available\n                </p>\n              )}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default Profile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}