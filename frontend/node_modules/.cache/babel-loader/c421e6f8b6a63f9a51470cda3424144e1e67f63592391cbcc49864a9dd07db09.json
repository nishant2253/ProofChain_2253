{"ast":null,"code":"var _jsxFileName = \"/home/nishant/proofchain/frontend/src/components/VotingInterface/index.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { motion } from \"framer-motion\";\nimport useWallet from \"../../hooks/useWallet\";\nimport { getSupportedTokens, submitVote, getVoteStatus } from \"../../utils/api\";\nimport { generateCommitHash, generateRandomSalt } from \"../../utils/blockchain\";\nimport { parseErrorMessage, formatDate, getVotingPhase } from \"../../utils/helpers\";\nimport { ethers } from \"ethers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VotingInterface = ({\n  content,\n  onVoteComplete\n}) => {\n  _s();\n  const {\n    isConnected,\n    signer,\n    address\n  } = useWallet();\n  const [votingPhase, setVotingPhase] = useState(\"\");\n  const [supportedTokens, setSupportedTokens] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [savedCommit, setSavedCommit] = useState(null);\n  const [vote, setVote] = useState(null);\n  const [confidence, setConfidence] = useState(5);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [existingVote, setExistingVote] = useState(null);\n\n  // Commit phase state\n  const [commitForm, setCommitForm] = useState({\n    vote: \"\",\n    confidence: 5,\n    // Default confidence (1-10)\n    tokenType: \"0\",\n    // Default token type (ETH)\n    stakeAmount: \"0.01\" // Default stake amount\n  });\n\n  // Reveal phase state\n  const [revealForm, setRevealForm] = useState({\n    vote: \"\",\n    confidence: 5,\n    salt: \"\"\n  });\n\n  // Load supported tokens on mount\n  useEffect(() => {\n    const fetchTokens = async () => {\n      try {\n        const response = await getSupportedTokens();\n        setSupportedTokens(response);\n      } catch (err) {\n        console.error(\"Error fetching supported tokens:\", err);\n        setError(\"Failed to load supported tokens\");\n      }\n    };\n    fetchTokens();\n  }, []);\n\n  // Fetch saved commit data for the current user\n  const fetchSavedCommit = useCallback(async () => {\n    try {\n      // Use getVoteStatus instead since getSavedCommitData is not available\n      const response = await getVoteStatus(content._id, address);\n      setSavedCommit(response);\n\n      // Pre-fill reveal form with saved data if commit data exists\n      if (response && response.commitHash) {\n        setRevealForm({\n          vote: response.vote ? \"true\" : \"false\",\n          confidence: response.confidence || 5,\n          salt: response.salt || \"\"\n        });\n      }\n    } catch (err) {\n      console.log(\"No saved commit found or error fetching commit data\");\n      // Not setting error state here as it's normal for a user to not have a saved commit\n    }\n  }, [content._id, address]);\n\n  // Determine voting phase when content changes\n  useEffect(() => {\n    if (content) {\n      const phase = getVotingPhase(content);\n      setVotingPhase(phase);\n\n      // If in reveal phase, try to load saved commit data\n      if (phase === \"reveal\" && isConnected) {\n        fetchSavedCommit();\n      }\n    }\n  }, [content, isConnected, fetchSavedCommit]);\n\n  // Check if user has already voted\n  useEffect(() => {\n    const checkExistingVote = async () => {\n      if (!isConnected || !address || !content._id) return;\n      try {\n        const voteStatus = await getVoteStatus(content._id, address);\n        if ((voteStatus === null || voteStatus === void 0 ? void 0 : voteStatus.vote) !== undefined) {\n          setExistingVote(voteStatus);\n          setVote(voteStatus.vote);\n          setConfidence(voteStatus.confidence);\n        }\n      } catch (err) {\n        console.error(\"Error checking vote status:\", err);\n      }\n    };\n    checkExistingVote();\n  }, [isConnected, address, content._id]);\n\n  // Handle commit form changes\n  const handleCommitChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCommitForm({\n      ...commitForm,\n      [name]: value\n    });\n  };\n\n  // Handle reveal form changes\n  const handleRevealChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setRevealForm({\n      ...revealForm,\n      [name]: value\n    });\n  };\n\n  // Submit commit vote\n  const handleCommitSubmit = async e => {\n    e.preventDefault();\n    if (!isConnected) {\n      setError(\"Please connect your wallet first\");\n      return;\n    }\n    setIsLoading(true);\n    setError(null);\n    setSuccess(null);\n    try {\n      // Generate a random salt\n      const salt = generateRandomSalt();\n\n      // Generate commit hash\n      const vote = commitForm.vote === \"true\";\n      const confidence = parseInt(commitForm.confidence);\n      const commitHash = generateCommitHash(vote, confidence, salt);\n\n      // Prepare data for API\n      const commitData = {\n        vote,\n        confidence,\n        salt,\n        commitHash,\n        tokenType: parseInt(commitForm.tokenType),\n        stakeAmount: commitForm.stakeAmount\n      };\n\n      // Submit commit vote\n      await submitVote(content._id, {\n        ...commitData,\n        type: \"commit\"\n      });\n      setSuccess(\"Vote committed successfully! Save your salt for the reveal phase.\");\n\n      // Notify parent component\n      if (onVoteComplete) {\n        onVoteComplete(\"commit\");\n      }\n    } catch (err) {\n      console.error(\"Error committing vote:\", err);\n      setError(parseErrorMessage(err));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Submit reveal vote\n  const handleRevealSubmit = async e => {\n    e.preventDefault();\n    if (!isConnected) {\n      setError(\"Please connect your wallet first\");\n      return;\n    }\n    setIsLoading(true);\n    setError(null);\n    setSuccess(null);\n    try {\n      // Prepare data for API\n      const revealData = {\n        vote: revealForm.vote === \"true\",\n        confidence: parseInt(revealForm.confidence),\n        salt: revealForm.salt\n      };\n\n      // Submit reveal vote\n      await submitVote(content._id, {\n        ...revealData,\n        type: \"reveal\"\n      });\n      setSuccess(\"Vote revealed successfully!\");\n\n      // Notify parent component\n      if (onVoteComplete) {\n        onVoteComplete(\"reveal\");\n      }\n    } catch (err) {\n      console.error(\"Error revealing vote:\", err);\n      setError(parseErrorMessage(err));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Handle finalization\n  const handleFinalize = async () => {\n    if (!isConnected) {\n      setError(\"Please connect your wallet first\");\n      return;\n    }\n    setIsLoading(true);\n    setError(null);\n    setSuccess(null);\n    try {\n      await submitVote(content._id, {\n        type: \"finalize\"\n      });\n      setSuccess(\"Voting finalized successfully!\");\n\n      // Notify parent component\n      if (onVoteComplete) {\n        onVoteComplete(\"finalize\");\n      }\n    } catch (err) {\n      console.error(\"Error finalizing voting:\", err);\n      setError(parseErrorMessage(err));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleVoteSubmit = async () => {\n    if (!isConnected) {\n      setError(\"Please connect your wallet to vote\");\n      return;\n    }\n    if (vote === null) {\n      setError(\"Please select your vote\");\n      return;\n    }\n    try {\n      setIsSubmitting(true);\n      setError(null);\n\n      // Create vote message\n      const message = {\n        contentId: content._id,\n        vote,\n        confidence,\n        timestamp: Date.now(),\n        address\n      };\n\n      // Sign the message\n      const messageHash = ethers.utils.hashMessage(JSON.stringify(message));\n      const signature = await signer.signMessage(messageHash);\n\n      // Submit vote to backend\n      await submitVote(content._id, {\n        ...message,\n        signature\n      });\n      setSuccess(\"Vote submitted successfully!\");\n      onVoteComplete === null || onVoteComplete === void 0 ? void 0 : onVoteComplete();\n\n      // Clear success message after 3 seconds\n      setTimeout(() => {\n        setSuccess(null);\n      }, 3000);\n    } catch (err) {\n      console.error(\"Vote submission error:\", err);\n      setError(err.message || \"Failed to submit vote. Please try again.\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Render appropriate interface based on voting phase\n  const renderVotingInterface = () => {\n    if (!isConnected) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mb-4\",\n          children: \"Connect your wallet to participate in voting\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this);\n    }\n    switch (votingPhase) {\n      case \"commit\":\n        return renderCommitPhase();\n      case \"reveal\":\n        return renderRevealPhase();\n      case \"pending\":\n        return renderPendingPhase();\n      case \"finalized\":\n        return renderFinalizedPhase();\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Loading voting interface...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 16\n        }, this);\n    }\n  };\n\n  // Render commit phase interface\n  const renderCommitPhase = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-lg shadow-md\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-semibold mb-4\",\n        children: \"Commit Your Vote\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-6\",\n        children: \"In this phase, you commit to a vote without revealing your choice. Your vote will be securely hashed and stored on the blockchain.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleCommitSubmit,\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: \"Your Vote\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"vote\",\n                value: \"true\",\n                checked: commitForm.vote === \"true\",\n                onChange: handleCommitChange,\n                className: \"h-4 w-4 text-primary-600 focus:ring-primary-500\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-2\",\n                children: \"Approve\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"vote\",\n                value: \"false\",\n                checked: commitForm.vote === \"false\",\n                onChange: handleCommitChange,\n                className: \"h-4 w-4 text-primary-600 focus:ring-primary-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-2\",\n                children: \"Reject\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: \"Confidence Level (1-10)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            name: \"confidence\",\n            min: \"1\",\n            max: \"10\",\n            value: commitForm.confidence,\n            onChange: handleCommitChange,\n            className: \"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between text-xs text-gray-500\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Low\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Medium\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"High\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center mt-1\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: commitForm.confidence\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: \"Token Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"tokenType\",\n            value: commitForm.tokenType,\n            onChange: handleCommitChange,\n            className: \"input-field\",\n            required: true,\n            children: supportedTokens.map(token => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: token.tokenType,\n              children: [token.symbol, \" - \", token.name]\n            }, token.tokenType, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: \"Stake Amount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"stakeAmount\",\n            value: commitForm.stakeAmount,\n            onChange: handleCommitChange,\n            step: \"0.001\",\n            min: \"0.001\",\n            className: \"input-field\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-gray-500 mt-1\",\n            children: \"Higher stakes increase your voting power (quadratically)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pt-4\",\n          children: /*#__PURE__*/_jsxDEV(motion.button, {\n            type: \"submit\",\n            whileHover: {\n              scale: 1.05\n            },\n            whileTap: {\n              scale: 0.95\n            },\n            disabled: isLoading,\n            className: \"btn-primary w-full\",\n            children: isLoading ? \"Submitting...\" : \"Commit Vote\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Render reveal phase interface\n  const renderRevealPhase = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-lg shadow-md\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-semibold mb-4\",\n        children: \"Reveal Your Vote\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-6\",\n        children: \"In this phase, you reveal your vote by providing the same vote, confidence level, and salt that you used during the commit phase.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this), savedCommit ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-green-50 border border-green-200 rounded-md p-4 mb-6\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-green-800\",\n          children: \"We found your previously committed vote. The form has been pre-filled with your data.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-6\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-yellow-800\",\n          children: \"No saved commit found. Make sure you use the exact same values you used during the commit phase.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleRevealSubmit,\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: \"Your Vote\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"vote\",\n                value: \"true\",\n                checked: revealForm.vote === \"true\",\n                onChange: handleRevealChange,\n                className: \"h-4 w-4 text-primary-600 focus:ring-primary-500\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-2\",\n                children: \"Approve\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"vote\",\n                value: \"false\",\n                checked: revealForm.vote === \"false\",\n                onChange: handleRevealChange,\n                className: \"h-4 w-4 text-primary-600 focus:ring-primary-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-2\",\n                children: \"Reject\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: \"Confidence Level (1-10)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            name: \"confidence\",\n            min: \"1\",\n            max: \"10\",\n            value: revealForm.confidence,\n            onChange: handleRevealChange,\n            className: \"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center mt-1\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: revealForm.confidence\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: \"Salt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"salt\",\n            value: revealForm.salt,\n            onChange: handleRevealChange,\n            className: \"input-field\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 520,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-gray-500 mt-1\",\n            children: \"This must match the salt used in the commit phase\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pt-4\",\n          children: /*#__PURE__*/_jsxDEV(motion.button, {\n            type: \"submit\",\n            whileHover: {\n              scale: 1.05\n            },\n            whileTap: {\n              scale: 0.95\n            },\n            disabled: isLoading,\n            className: \"btn-primary w-full\",\n            children: isLoading ? \"Submitting...\" : \"Reveal Vote\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 534,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Render pending finalization phase\n  const renderPendingPhase = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-lg shadow-md\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-semibold mb-4\",\n        children: \"Voting Period Ended\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-6\",\n        children: \"The voting period has ended. The results can now be finalized on the blockchain.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n        whileHover: {\n          scale: 1.05\n        },\n        whileTap: {\n          scale: 0.95\n        },\n        onClick: handleFinalize,\n        disabled: isLoading,\n        className: \"btn-primary w-full\",\n        children: isLoading ? \"Processing...\" : \"Finalize Voting\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 552,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Render finalized phase\n  const renderFinalizedPhase = () => {\n    const result = content.blockchainResults || {};\n    const winningOption = result.winningOption === 1 ? \"Approved\" : \"Rejected\";\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-lg shadow-md\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-semibold mb-4\",\n        children: \"Voting Finalized\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-2\",\n        children: [\"This content has been \", winningOption.toLowerCase(), \" by the community.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-700\",\n            children: \"Result:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 586,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium\",\n            children: winningOption\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 587,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 585,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-700\",\n            children: \"Total Participants:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 590,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium\",\n            children: result.totalParticipants || 0\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 589,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-700\",\n            children: \"Total USD Value Staked:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium\",\n            children: [\"$\", result.totalUSDValue || 0]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 593,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-700\",\n            children: \"Finalized On:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 598,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium\",\n            children: formatDate(content.finalizedAt)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 578,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [error && /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        opacity: 0,\n        y: -10\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      className: \"bg-red-100 text-red-700 p-4 rounded-md mb-6\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 611,\n      columnNumber: 9\n    }, this), success && /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        opacity: 0,\n        y: -10\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      className: \"bg-green-100 text-green-700 p-4 rounded-md mb-6\",\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 621,\n      columnNumber: 9\n    }, this), existingVote && !existingVote.canModify && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-50 dark:bg-gray-800 p-6 rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold mb-4 text-gray-900 dark:text-white\",\n        children: \"Your Vote\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 632,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 rounded-lg bg-white dark:bg-gray-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-medium text-gray-900 dark:text-white\",\n            children: existingVote.vote ? \"Approved\" : \"Rejected\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-500 dark:text-gray-400\",\n            children: [\"Confidence: \", existingVote.confidence, \"/10\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 640,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-500 dark:text-gray-400 mt-2\",\n            children: [\"Submitted: \", new Date(existingVote.timestamp).toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 636,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500 dark:text-gray-400 text-center\",\n          children: \"Your vote has been recorded and cannot be modified\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 635,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 631,\n      columnNumber: 9\n    }, this), renderVotingInterface(), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleVoteSubmit,\n        disabled: isSubmitting || vote === null,\n        className: `\n            w-full py-3 px-4 rounded-lg font-medium text-white\n            ${isSubmitting ? \"bg-gray-400 cursor-not-allowed\" : \"bg-primary-600 hover:bg-primary-700\"}\n            transition-colors duration-200\n          `,\n        children: isSubmitting ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 672,\n            columnNumber: 15\n          }, this), \"Submitting...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 13\n        }, this) : existingVote ? \"Update Vote\" : \"Submit Vote\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 657,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 656,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 609,\n    columnNumber: 5\n  }, this);\n};\n_s(VotingInterface, \"em+HIYpDxDX5/7xfLu0AAdKfZp4=\", false, function () {\n  return [useWallet];\n});\n_c = VotingInterface;\nexport default VotingInterface;\nvar _c;\n$RefreshReg$(_c, \"VotingInterface\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","motion","useWallet","getSupportedTokens","submitVote","getVoteStatus","generateCommitHash","generateRandomSalt","parseErrorMessage","formatDate","getVotingPhase","ethers","jsxDEV","_jsxDEV","VotingInterface","content","onVoteComplete","_s","isConnected","signer","address","votingPhase","setVotingPhase","supportedTokens","setSupportedTokens","isLoading","setIsLoading","error","setError","success","setSuccess","savedCommit","setSavedCommit","vote","setVote","confidence","setConfidence","isSubmitting","setIsSubmitting","existingVote","setExistingVote","commitForm","setCommitForm","tokenType","stakeAmount","revealForm","setRevealForm","salt","fetchTokens","response","err","console","fetchSavedCommit","_id","commitHash","log","phase","checkExistingVote","voteStatus","undefined","handleCommitChange","e","name","value","target","handleRevealChange","handleCommitSubmit","preventDefault","parseInt","commitData","type","handleRevealSubmit","revealData","handleFinalize","handleVoteSubmit","message","contentId","timestamp","Date","now","messageHash","utils","hashMessage","JSON","stringify","signature","signMessage","setTimeout","renderVotingInterface","className","children","fileName","_jsxFileName","lineNumber","columnNumber","renderCommitPhase","renderRevealPhase","renderPendingPhase","renderFinalizedPhase","onSubmit","checked","onChange","required","min","max","map","token","symbol","step","button","whileHover","scale","whileTap","disabled","onClick","result","blockchainResults","winningOption","toLowerCase","totalParticipants","totalUSDValue","finalizedAt","div","initial","opacity","y","animate","canModify","toLocaleString","_c","$RefreshReg$"],"sources":["/home/nishant/proofchain/frontend/src/components/VotingInterface/index.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { motion } from \"framer-motion\";\nimport useWallet from \"../../hooks/useWallet\";\nimport { getSupportedTokens, submitVote, getVoteStatus } from \"../../utils/api\";\nimport { generateCommitHash, generateRandomSalt } from \"../../utils/blockchain\";\nimport {\n  parseErrorMessage,\n  formatDate,\n  getVotingPhase,\n} from \"../../utils/helpers\";\nimport { ethers } from \"ethers\";\n\nconst VotingInterface = ({ content, onVoteComplete }) => {\n  const { isConnected, signer, address } = useWallet();\n\n  const [votingPhase, setVotingPhase] = useState(\"\");\n  const [supportedTokens, setSupportedTokens] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [savedCommit, setSavedCommit] = useState(null);\n  const [vote, setVote] = useState(null);\n  const [confidence, setConfidence] = useState(5);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [existingVote, setExistingVote] = useState(null);\n\n  // Commit phase state\n  const [commitForm, setCommitForm] = useState({\n    vote: \"\",\n    confidence: 5, // Default confidence (1-10)\n    tokenType: \"0\", // Default token type (ETH)\n    stakeAmount: \"0.01\", // Default stake amount\n  });\n\n  // Reveal phase state\n  const [revealForm, setRevealForm] = useState({\n    vote: \"\",\n    confidence: 5,\n    salt: \"\",\n  });\n\n  // Load supported tokens on mount\n  useEffect(() => {\n    const fetchTokens = async () => {\n      try {\n        const response = await getSupportedTokens();\n        setSupportedTokens(response);\n      } catch (err) {\n        console.error(\"Error fetching supported tokens:\", err);\n        setError(\"Failed to load supported tokens\");\n      }\n    };\n\n    fetchTokens();\n  }, []);\n\n  // Fetch saved commit data for the current user\n  const fetchSavedCommit = useCallback(async () => {\n    try {\n      // Use getVoteStatus instead since getSavedCommitData is not available\n      const response = await getVoteStatus(content._id, address);\n      setSavedCommit(response);\n\n      // Pre-fill reveal form with saved data if commit data exists\n      if (response && response.commitHash) {\n        setRevealForm({\n          vote: response.vote ? \"true\" : \"false\",\n          confidence: response.confidence || 5,\n          salt: response.salt || \"\",\n        });\n      }\n    } catch (err) {\n      console.log(\"No saved commit found or error fetching commit data\");\n      // Not setting error state here as it's normal for a user to not have a saved commit\n    }\n  }, [content._id, address]);\n\n  // Determine voting phase when content changes\n  useEffect(() => {\n    if (content) {\n      const phase = getVotingPhase(content);\n      setVotingPhase(phase);\n\n      // If in reveal phase, try to load saved commit data\n      if (phase === \"reveal\" && isConnected) {\n        fetchSavedCommit();\n      }\n    }\n  }, [content, isConnected, fetchSavedCommit]);\n\n  // Check if user has already voted\n  useEffect(() => {\n    const checkExistingVote = async () => {\n      if (!isConnected || !address || !content._id) return;\n\n      try {\n        const voteStatus = await getVoteStatus(content._id, address);\n        if (voteStatus?.vote !== undefined) {\n          setExistingVote(voteStatus);\n          setVote(voteStatus.vote);\n          setConfidence(voteStatus.confidence);\n        }\n      } catch (err) {\n        console.error(\"Error checking vote status:\", err);\n      }\n    };\n\n    checkExistingVote();\n  }, [isConnected, address, content._id]);\n\n  // Handle commit form changes\n  const handleCommitChange = (e) => {\n    const { name, value } = e.target;\n    setCommitForm({\n      ...commitForm,\n      [name]: value,\n    });\n  };\n\n  // Handle reveal form changes\n  const handleRevealChange = (e) => {\n    const { name, value } = e.target;\n    setRevealForm({\n      ...revealForm,\n      [name]: value,\n    });\n  };\n\n  // Submit commit vote\n  const handleCommitSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!isConnected) {\n      setError(\"Please connect your wallet first\");\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n    setSuccess(null);\n\n    try {\n      // Generate a random salt\n      const salt = generateRandomSalt();\n\n      // Generate commit hash\n      const vote = commitForm.vote === \"true\";\n      const confidence = parseInt(commitForm.confidence);\n      const commitHash = generateCommitHash(vote, confidence, salt);\n\n      // Prepare data for API\n      const commitData = {\n        vote,\n        confidence,\n        salt,\n        commitHash,\n        tokenType: parseInt(commitForm.tokenType),\n        stakeAmount: commitForm.stakeAmount,\n      };\n\n      // Submit commit vote\n      await submitVote(content._id, { ...commitData, type: \"commit\" });\n\n      setSuccess(\n        \"Vote committed successfully! Save your salt for the reveal phase.\"\n      );\n\n      // Notify parent component\n      if (onVoteComplete) {\n        onVoteComplete(\"commit\");\n      }\n    } catch (err) {\n      console.error(\"Error committing vote:\", err);\n      setError(parseErrorMessage(err));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Submit reveal vote\n  const handleRevealSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!isConnected) {\n      setError(\"Please connect your wallet first\");\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n    setSuccess(null);\n\n    try {\n      // Prepare data for API\n      const revealData = {\n        vote: revealForm.vote === \"true\",\n        confidence: parseInt(revealForm.confidence),\n        salt: revealForm.salt,\n      };\n\n      // Submit reveal vote\n      await submitVote(content._id, { ...revealData, type: \"reveal\" });\n\n      setSuccess(\"Vote revealed successfully!\");\n\n      // Notify parent component\n      if (onVoteComplete) {\n        onVoteComplete(\"reveal\");\n      }\n    } catch (err) {\n      console.error(\"Error revealing vote:\", err);\n      setError(parseErrorMessage(err));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Handle finalization\n  const handleFinalize = async () => {\n    if (!isConnected) {\n      setError(\"Please connect your wallet first\");\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n    setSuccess(null);\n\n    try {\n      await submitVote(content._id, { type: \"finalize\" });\n\n      setSuccess(\"Voting finalized successfully!\");\n\n      // Notify parent component\n      if (onVoteComplete) {\n        onVoteComplete(\"finalize\");\n      }\n    } catch (err) {\n      console.error(\"Error finalizing voting:\", err);\n      setError(parseErrorMessage(err));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleVoteSubmit = async () => {\n    if (!isConnected) {\n      setError(\"Please connect your wallet to vote\");\n      return;\n    }\n\n    if (vote === null) {\n      setError(\"Please select your vote\");\n      return;\n    }\n\n    try {\n      setIsSubmitting(true);\n      setError(null);\n\n      // Create vote message\n      const message = {\n        contentId: content._id,\n        vote,\n        confidence,\n        timestamp: Date.now(),\n        address,\n      };\n\n      // Sign the message\n      const messageHash = ethers.utils.hashMessage(JSON.stringify(message));\n      const signature = await signer.signMessage(messageHash);\n\n      // Submit vote to backend\n      await submitVote(content._id, {\n        ...message,\n        signature,\n      });\n\n      setSuccess(\"Vote submitted successfully!\");\n      onVoteComplete?.();\n\n      // Clear success message after 3 seconds\n      setTimeout(() => {\n        setSuccess(null);\n      }, 3000);\n    } catch (err) {\n      console.error(\"Vote submission error:\", err);\n      setError(err.message || \"Failed to submit vote. Please try again.\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Render appropriate interface based on voting phase\n  const renderVotingInterface = () => {\n    if (!isConnected) {\n      return (\n        <div className=\"text-center py-8\">\n          <p className=\"text-gray-600 mb-4\">\n            Connect your wallet to participate in voting\n          </p>\n        </div>\n      );\n    }\n\n    switch (votingPhase) {\n      case \"commit\":\n        return renderCommitPhase();\n      case \"reveal\":\n        return renderRevealPhase();\n      case \"pending\":\n        return renderPendingPhase();\n      case \"finalized\":\n        return renderFinalizedPhase();\n      default:\n        return <div>Loading voting interface...</div>;\n    }\n  };\n\n  // Render commit phase interface\n  const renderCommitPhase = () => {\n    return (\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h2 className=\"text-xl font-semibold mb-4\">Commit Your Vote</h2>\n        <p className=\"text-gray-600 mb-6\">\n          In this phase, you commit to a vote without revealing your choice.\n          Your vote will be securely hashed and stored on the blockchain.\n        </p>\n\n        <form onSubmit={handleCommitSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Your Vote\n            </label>\n            <div className=\"flex space-x-4\">\n              <label className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  name=\"vote\"\n                  value=\"true\"\n                  checked={commitForm.vote === \"true\"}\n                  onChange={handleCommitChange}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500\"\n                  required\n                />\n                <span className=\"ml-2\">Approve</span>\n              </label>\n              <label className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  name=\"vote\"\n                  value=\"false\"\n                  checked={commitForm.vote === \"false\"}\n                  onChange={handleCommitChange}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500\"\n                />\n                <span className=\"ml-2\">Reject</span>\n              </label>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Confidence Level (1-10)\n            </label>\n            <input\n              type=\"range\"\n              name=\"confidence\"\n              min=\"1\"\n              max=\"10\"\n              value={commitForm.confidence}\n              onChange={handleCommitChange}\n              className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n            />\n            <div className=\"flex justify-between text-xs text-gray-500\">\n              <span>Low</span>\n              <span>Medium</span>\n              <span>High</span>\n            </div>\n            <div className=\"text-center mt-1\">\n              <span className=\"font-medium\">{commitForm.confidence}</span>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Token Type\n            </label>\n            <select\n              name=\"tokenType\"\n              value={commitForm.tokenType}\n              onChange={handleCommitChange}\n              className=\"input-field\"\n              required\n            >\n              {supportedTokens.map((token) => (\n                <option key={token.tokenType} value={token.tokenType}>\n                  {token.symbol} - {token.name}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Stake Amount\n            </label>\n            <input\n              type=\"number\"\n              name=\"stakeAmount\"\n              value={commitForm.stakeAmount}\n              onChange={handleCommitChange}\n              step=\"0.001\"\n              min=\"0.001\"\n              className=\"input-field\"\n              required\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">\n              Higher stakes increase your voting power (quadratically)\n            </p>\n          </div>\n\n          <div className=\"pt-4\">\n            <motion.button\n              type=\"submit\"\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              disabled={isLoading}\n              className=\"btn-primary w-full\"\n            >\n              {isLoading ? \"Submitting...\" : \"Commit Vote\"}\n            </motion.button>\n          </div>\n        </form>\n      </div>\n    );\n  };\n\n  // Render reveal phase interface\n  const renderRevealPhase = () => {\n    return (\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h2 className=\"text-xl font-semibold mb-4\">Reveal Your Vote</h2>\n        <p className=\"text-gray-600 mb-6\">\n          In this phase, you reveal your vote by providing the same vote,\n          confidence level, and salt that you used during the commit phase.\n        </p>\n\n        {savedCommit ? (\n          <div className=\"bg-green-50 border border-green-200 rounded-md p-4 mb-6\">\n            <p className=\"text-green-800\">\n              We found your previously committed vote. The form has been\n              pre-filled with your data.\n            </p>\n          </div>\n        ) : (\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-6\">\n            <p className=\"text-yellow-800\">\n              No saved commit found. Make sure you use the exact same values you\n              used during the commit phase.\n            </p>\n          </div>\n        )}\n\n        <form onSubmit={handleRevealSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Your Vote\n            </label>\n            <div className=\"flex space-x-4\">\n              <label className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  name=\"vote\"\n                  value=\"true\"\n                  checked={revealForm.vote === \"true\"}\n                  onChange={handleRevealChange}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500\"\n                  required\n                />\n                <span className=\"ml-2\">Approve</span>\n              </label>\n              <label className=\"flex items-center\">\n                <input\n                  type=\"radio\"\n                  name=\"vote\"\n                  value=\"false\"\n                  checked={revealForm.vote === \"false\"}\n                  onChange={handleRevealChange}\n                  className=\"h-4 w-4 text-primary-600 focus:ring-primary-500\"\n                />\n                <span className=\"ml-2\">Reject</span>\n              </label>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Confidence Level (1-10)\n            </label>\n            <input\n              type=\"range\"\n              name=\"confidence\"\n              min=\"1\"\n              max=\"10\"\n              value={revealForm.confidence}\n              onChange={handleRevealChange}\n              className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n            />\n            <div className=\"text-center mt-1\">\n              <span className=\"font-medium\">{revealForm.confidence}</span>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Salt\n            </label>\n            <input\n              type=\"text\"\n              name=\"salt\"\n              value={revealForm.salt}\n              onChange={handleRevealChange}\n              className=\"input-field\"\n              required\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">\n              This must match the salt used in the commit phase\n            </p>\n          </div>\n\n          <div className=\"pt-4\">\n            <motion.button\n              type=\"submit\"\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              disabled={isLoading}\n              className=\"btn-primary w-full\"\n            >\n              {isLoading ? \"Submitting...\" : \"Reveal Vote\"}\n            </motion.button>\n          </div>\n        </form>\n      </div>\n    );\n  };\n\n  // Render pending finalization phase\n  const renderPendingPhase = () => {\n    return (\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h2 className=\"text-xl font-semibold mb-4\">Voting Period Ended</h2>\n        <p className=\"text-gray-600 mb-6\">\n          The voting period has ended. The results can now be finalized on the\n          blockchain.\n        </p>\n\n        <motion.button\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n          onClick={handleFinalize}\n          disabled={isLoading}\n          className=\"btn-primary w-full\"\n        >\n          {isLoading ? \"Processing...\" : \"Finalize Voting\"}\n        </motion.button>\n      </div>\n    );\n  };\n\n  // Render finalized phase\n  const renderFinalizedPhase = () => {\n    const result = content.blockchainResults || {};\n    const winningOption = result.winningOption === 1 ? \"Approved\" : \"Rejected\";\n\n    return (\n      <div className=\"bg-white p-6 rounded-lg shadow-md\">\n        <h2 className=\"text-xl font-semibold mb-4\">Voting Finalized</h2>\n        <p className=\"text-gray-600 mb-2\">\n          This content has been {winningOption.toLowerCase()} by the community.\n        </p>\n\n        <div className=\"mt-6 space-y-4\">\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-700\">Result:</span>\n            <span className=\"font-medium\">{winningOption}</span>\n          </div>\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-700\">Total Participants:</span>\n            <span className=\"font-medium\">{result.totalParticipants || 0}</span>\n          </div>\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-700\">Total USD Value Staked:</span>\n            <span className=\"font-medium\">${result.totalUSDValue || 0}</span>\n          </div>\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-700\">Finalized On:</span>\n            <span className=\"font-medium\">\n              {formatDate(content.finalizedAt)}\n            </span>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div>\n      {error && (\n        <motion.div\n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"bg-red-100 text-red-700 p-4 rounded-md mb-6\"\n        >\n          {error}\n        </motion.div>\n      )}\n\n      {success && (\n        <motion.div\n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"bg-green-100 text-green-700 p-4 rounded-md mb-6\"\n        >\n          {success}\n        </motion.div>\n      )}\n\n      {existingVote && !existingVote.canModify && (\n        <div className=\"bg-gray-50 dark:bg-gray-800 p-6 rounded-lg\">\n          <h3 className=\"text-xl font-semibold mb-4 text-gray-900 dark:text-white\">\n            Your Vote\n          </h3>\n          <div className=\"space-y-4\">\n            <div className=\"p-4 rounded-lg bg-white dark:bg-gray-700\">\n              <p className=\"font-medium text-gray-900 dark:text-white\">\n                {existingVote.vote ? \"Approved\" : \"Rejected\"}\n              </p>\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                Confidence: {existingVote.confidence}/10\n              </p>\n              <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-2\">\n                Submitted: {new Date(existingVote.timestamp).toLocaleString()}\n              </p>\n            </div>\n            <p className=\"text-sm text-gray-500 dark:text-gray-400 text-center\">\n              Your vote has been recorded and cannot be modified\n            </p>\n          </div>\n        </div>\n      )}\n\n      {renderVotingInterface()}\n\n      <div className=\"mt-6\">\n        <button\n          onClick={handleVoteSubmit}\n          disabled={isSubmitting || vote === null}\n          className={`\n            w-full py-3 px-4 rounded-lg font-medium text-white\n            ${\n              isSubmitting\n                ? \"bg-gray-400 cursor-not-allowed\"\n                : \"bg-primary-600 hover:bg-primary-700\"\n            }\n            transition-colors duration-200\n          `}\n        >\n          {isSubmitting ? (\n            <div className=\"flex items-center justify-center\">\n              <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"></div>\n              Submitting...\n            </div>\n          ) : existingVote ? (\n            \"Update Vote\"\n          ) : (\n            \"Submit Vote\"\n          )}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default VotingInterface;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,MAAM,QAAQ,eAAe;AACtC,OAAOC,SAAS,MAAM,uBAAuB;AAC7C,SAASC,kBAAkB,EAAEC,UAAU,EAAEC,aAAa,QAAQ,iBAAiB;AAC/E,SAASC,kBAAkB,EAAEC,kBAAkB,QAAQ,wBAAwB;AAC/E,SACEC,iBAAiB,EACjBC,UAAU,EACVC,cAAc,QACT,qBAAqB;AAC5B,SAASC,MAAM,QAAQ,QAAQ;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhC,MAAMC,eAAe,GAAGA,CAAC;EAAEC,OAAO;EAAEC;AAAe,CAAC,KAAK;EAAAC,EAAA;EACvD,MAAM;IAAEC,WAAW;IAAEC,MAAM;IAAEC;EAAQ,CAAC,GAAGlB,SAAS,CAAC,CAAC;EAEpD,MAAM,CAACmB,WAAW,EAAEC,cAAc,CAAC,GAAGxB,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACyB,eAAe,EAAEC,kBAAkB,CAAC,GAAG1B,QAAQ,CAAC,EAAE,CAAC;EAC1D,MAAM,CAAC2B,SAAS,EAAEC,YAAY,CAAC,GAAG5B,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAAC6B,KAAK,EAAEC,QAAQ,CAAC,GAAG9B,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAAC+B,OAAO,EAAEC,UAAU,CAAC,GAAGhC,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACiC,WAAW,EAAEC,cAAc,CAAC,GAAGlC,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACmC,IAAI,EAAEC,OAAO,CAAC,GAAGpC,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACqC,UAAU,EAAEC,aAAa,CAAC,GAAGtC,QAAQ,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACuC,YAAY,EAAEC,eAAe,CAAC,GAAGxC,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACyC,YAAY,EAAEC,eAAe,CAAC,GAAG1C,QAAQ,CAAC,IAAI,CAAC;;EAEtD;EACA,MAAM,CAAC2C,UAAU,EAAEC,aAAa,CAAC,GAAG5C,QAAQ,CAAC;IAC3CmC,IAAI,EAAE,EAAE;IACRE,UAAU,EAAE,CAAC;IAAE;IACfQ,SAAS,EAAE,GAAG;IAAE;IAChBC,WAAW,EAAE,MAAM,CAAE;EACvB,CAAC,CAAC;;EAEF;EACA,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGhD,QAAQ,CAAC;IAC3CmC,IAAI,EAAE,EAAE;IACRE,UAAU,EAAE,CAAC;IACbY,IAAI,EAAE;EACR,CAAC,CAAC;;EAEF;EACAhD,SAAS,CAAC,MAAM;IACd,MAAMiD,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9B,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAM9C,kBAAkB,CAAC,CAAC;QAC3CqB,kBAAkB,CAACyB,QAAQ,CAAC;MAC9B,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACxB,KAAK,CAAC,kCAAkC,EAAEuB,GAAG,CAAC;QACtDtB,QAAQ,CAAC,iCAAiC,CAAC;MAC7C;IACF,CAAC;IAEDoB,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMI,gBAAgB,GAAGpD,WAAW,CAAC,YAAY;IAC/C,IAAI;MACF;MACA,MAAMiD,QAAQ,GAAG,MAAM5C,aAAa,CAACU,OAAO,CAACsC,GAAG,EAAEjC,OAAO,CAAC;MAC1DY,cAAc,CAACiB,QAAQ,CAAC;;MAExB;MACA,IAAIA,QAAQ,IAAIA,QAAQ,CAACK,UAAU,EAAE;QACnCR,aAAa,CAAC;UACZb,IAAI,EAAEgB,QAAQ,CAAChB,IAAI,GAAG,MAAM,GAAG,OAAO;UACtCE,UAAU,EAAEc,QAAQ,CAACd,UAAU,IAAI,CAAC;UACpCY,IAAI,EAAEE,QAAQ,CAACF,IAAI,IAAI;QACzB,CAAC,CAAC;MACJ;IACF,CAAC,CAAC,OAAOG,GAAG,EAAE;MACZC,OAAO,CAACI,GAAG,CAAC,qDAAqD,CAAC;MAClE;IACF;EACF,CAAC,EAAE,CAACxC,OAAO,CAACsC,GAAG,EAAEjC,OAAO,CAAC,CAAC;;EAE1B;EACArB,SAAS,CAAC,MAAM;IACd,IAAIgB,OAAO,EAAE;MACX,MAAMyC,KAAK,GAAG9C,cAAc,CAACK,OAAO,CAAC;MACrCO,cAAc,CAACkC,KAAK,CAAC;;MAErB;MACA,IAAIA,KAAK,KAAK,QAAQ,IAAItC,WAAW,EAAE;QACrCkC,gBAAgB,CAAC,CAAC;MACpB;IACF;EACF,CAAC,EAAE,CAACrC,OAAO,EAAEG,WAAW,EAAEkC,gBAAgB,CAAC,CAAC;;EAE5C;EACArD,SAAS,CAAC,MAAM;IACd,MAAM0D,iBAAiB,GAAG,MAAAA,CAAA,KAAY;MACpC,IAAI,CAACvC,WAAW,IAAI,CAACE,OAAO,IAAI,CAACL,OAAO,CAACsC,GAAG,EAAE;MAE9C,IAAI;QACF,MAAMK,UAAU,GAAG,MAAMrD,aAAa,CAACU,OAAO,CAACsC,GAAG,EAAEjC,OAAO,CAAC;QAC5D,IAAI,CAAAsC,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEzB,IAAI,MAAK0B,SAAS,EAAE;UAClCnB,eAAe,CAACkB,UAAU,CAAC;UAC3BxB,OAAO,CAACwB,UAAU,CAACzB,IAAI,CAAC;UACxBG,aAAa,CAACsB,UAAU,CAACvB,UAAU,CAAC;QACtC;MACF,CAAC,CAAC,OAAOe,GAAG,EAAE;QACZC,OAAO,CAACxB,KAAK,CAAC,6BAA6B,EAAEuB,GAAG,CAAC;MACnD;IACF,CAAC;IAEDO,iBAAiB,CAAC,CAAC;EACrB,CAAC,EAAE,CAACvC,WAAW,EAAEE,OAAO,EAAEL,OAAO,CAACsC,GAAG,CAAC,CAAC;;EAEvC;EACA,MAAMO,kBAAkB,GAAIC,CAAC,IAAK;IAChC,MAAM;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAGF,CAAC,CAACG,MAAM;IAChCtB,aAAa,CAAC;MACZ,GAAGD,UAAU;MACb,CAACqB,IAAI,GAAGC;IACV,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAME,kBAAkB,GAAIJ,CAAC,IAAK;IAChC,MAAM;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAGF,CAAC,CAACG,MAAM;IAChClB,aAAa,CAAC;MACZ,GAAGD,UAAU;MACb,CAACiB,IAAI,GAAGC;IACV,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAMG,kBAAkB,GAAG,MAAOL,CAAC,IAAK;IACtCA,CAAC,CAACM,cAAc,CAAC,CAAC;IAElB,IAAI,CAACjD,WAAW,EAAE;MAChBU,QAAQ,CAAC,kCAAkC,CAAC;MAC5C;IACF;IAEAF,YAAY,CAAC,IAAI,CAAC;IAClBE,QAAQ,CAAC,IAAI,CAAC;IACdE,UAAU,CAAC,IAAI,CAAC;IAEhB,IAAI;MACF;MACA,MAAMiB,IAAI,GAAGxC,kBAAkB,CAAC,CAAC;;MAEjC;MACA,MAAM0B,IAAI,GAAGQ,UAAU,CAACR,IAAI,KAAK,MAAM;MACvC,MAAME,UAAU,GAAGiC,QAAQ,CAAC3B,UAAU,CAACN,UAAU,CAAC;MAClD,MAAMmB,UAAU,GAAGhD,kBAAkB,CAAC2B,IAAI,EAAEE,UAAU,EAAEY,IAAI,CAAC;;MAE7D;MACA,MAAMsB,UAAU,GAAG;QACjBpC,IAAI;QACJE,UAAU;QACVY,IAAI;QACJO,UAAU;QACVX,SAAS,EAAEyB,QAAQ,CAAC3B,UAAU,CAACE,SAAS,CAAC;QACzCC,WAAW,EAAEH,UAAU,CAACG;MAC1B,CAAC;;MAED;MACA,MAAMxC,UAAU,CAACW,OAAO,CAACsC,GAAG,EAAE;QAAE,GAAGgB,UAAU;QAAEC,IAAI,EAAE;MAAS,CAAC,CAAC;MAEhExC,UAAU,CACR,mEACF,CAAC;;MAED;MACA,IAAId,cAAc,EAAE;QAClBA,cAAc,CAAC,QAAQ,CAAC;MAC1B;IACF,CAAC,CAAC,OAAOkC,GAAG,EAAE;MACZC,OAAO,CAACxB,KAAK,CAAC,wBAAwB,EAAEuB,GAAG,CAAC;MAC5CtB,QAAQ,CAACpB,iBAAiB,CAAC0C,GAAG,CAAC,CAAC;IAClC,CAAC,SAAS;MACRxB,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;;EAED;EACA,MAAM6C,kBAAkB,GAAG,MAAOV,CAAC,IAAK;IACtCA,CAAC,CAACM,cAAc,CAAC,CAAC;IAElB,IAAI,CAACjD,WAAW,EAAE;MAChBU,QAAQ,CAAC,kCAAkC,CAAC;MAC5C;IACF;IAEAF,YAAY,CAAC,IAAI,CAAC;IAClBE,QAAQ,CAAC,IAAI,CAAC;IACdE,UAAU,CAAC,IAAI,CAAC;IAEhB,IAAI;MACF;MACA,MAAM0C,UAAU,GAAG;QACjBvC,IAAI,EAAEY,UAAU,CAACZ,IAAI,KAAK,MAAM;QAChCE,UAAU,EAAEiC,QAAQ,CAACvB,UAAU,CAACV,UAAU,CAAC;QAC3CY,IAAI,EAAEF,UAAU,CAACE;MACnB,CAAC;;MAED;MACA,MAAM3C,UAAU,CAACW,OAAO,CAACsC,GAAG,EAAE;QAAE,GAAGmB,UAAU;QAAEF,IAAI,EAAE;MAAS,CAAC,CAAC;MAEhExC,UAAU,CAAC,6BAA6B,CAAC;;MAEzC;MACA,IAAId,cAAc,EAAE;QAClBA,cAAc,CAAC,QAAQ,CAAC;MAC1B;IACF,CAAC,CAAC,OAAOkC,GAAG,EAAE;MACZC,OAAO,CAACxB,KAAK,CAAC,uBAAuB,EAAEuB,GAAG,CAAC;MAC3CtB,QAAQ,CAACpB,iBAAiB,CAAC0C,GAAG,CAAC,CAAC;IAClC,CAAC,SAAS;MACRxB,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;;EAED;EACA,MAAM+C,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI,CAACvD,WAAW,EAAE;MAChBU,QAAQ,CAAC,kCAAkC,CAAC;MAC5C;IACF;IAEAF,YAAY,CAAC,IAAI,CAAC;IAClBE,QAAQ,CAAC,IAAI,CAAC;IACdE,UAAU,CAAC,IAAI,CAAC;IAEhB,IAAI;MACF,MAAM1B,UAAU,CAACW,OAAO,CAACsC,GAAG,EAAE;QAAEiB,IAAI,EAAE;MAAW,CAAC,CAAC;MAEnDxC,UAAU,CAAC,gCAAgC,CAAC;;MAE5C;MACA,IAAId,cAAc,EAAE;QAClBA,cAAc,CAAC,UAAU,CAAC;MAC5B;IACF,CAAC,CAAC,OAAOkC,GAAG,EAAE;MACZC,OAAO,CAACxB,KAAK,CAAC,0BAA0B,EAAEuB,GAAG,CAAC;MAC9CtB,QAAQ,CAACpB,iBAAiB,CAAC0C,GAAG,CAAC,CAAC;IAClC,CAAC,SAAS;MACRxB,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMgD,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACnC,IAAI,CAACxD,WAAW,EAAE;MAChBU,QAAQ,CAAC,oCAAoC,CAAC;MAC9C;IACF;IAEA,IAAIK,IAAI,KAAK,IAAI,EAAE;MACjBL,QAAQ,CAAC,yBAAyB,CAAC;MACnC;IACF;IAEA,IAAI;MACFU,eAAe,CAAC,IAAI,CAAC;MACrBV,QAAQ,CAAC,IAAI,CAAC;;MAEd;MACA,MAAM+C,OAAO,GAAG;QACdC,SAAS,EAAE7D,OAAO,CAACsC,GAAG;QACtBpB,IAAI;QACJE,UAAU;QACV0C,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;QACrB3D;MACF,CAAC;;MAED;MACA,MAAM4D,WAAW,GAAGrE,MAAM,CAACsE,KAAK,CAACC,WAAW,CAACC,IAAI,CAACC,SAAS,CAACT,OAAO,CAAC,CAAC;MACrE,MAAMU,SAAS,GAAG,MAAMlE,MAAM,CAACmE,WAAW,CAACN,WAAW,CAAC;;MAEvD;MACA,MAAM5E,UAAU,CAACW,OAAO,CAACsC,GAAG,EAAE;QAC5B,GAAGsB,OAAO;QACVU;MACF,CAAC,CAAC;MAEFvD,UAAU,CAAC,8BAA8B,CAAC;MAC1Cd,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAG,CAAC;;MAElB;MACAuE,UAAU,CAAC,MAAM;QACfzD,UAAU,CAAC,IAAI,CAAC;MAClB,CAAC,EAAE,IAAI,CAAC;IACV,CAAC,CAAC,OAAOoB,GAAG,EAAE;MACZC,OAAO,CAACxB,KAAK,CAAC,wBAAwB,EAAEuB,GAAG,CAAC;MAC5CtB,QAAQ,CAACsB,GAAG,CAACyB,OAAO,IAAI,0CAA0C,CAAC;IACrE,CAAC,SAAS;MACRrC,eAAe,CAAC,KAAK,CAAC;IACxB;EACF,CAAC;;EAED;EACA,MAAMkD,qBAAqB,GAAGA,CAAA,KAAM;IAClC,IAAI,CAACtE,WAAW,EAAE;MAChB,oBACEL,OAAA;QAAK4E,SAAS,EAAC,kBAAkB;QAAAC,QAAA,eAC/B7E,OAAA;UAAG4E,SAAS,EAAC,oBAAoB;UAAAC,QAAA,EAAC;QAElC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC;IAEV;IAEA,QAAQzE,WAAW;MACjB,KAAK,QAAQ;QACX,OAAO0E,iBAAiB,CAAC,CAAC;MAC5B,KAAK,QAAQ;QACX,OAAOC,iBAAiB,CAAC,CAAC;MAC5B,KAAK,SAAS;QACZ,OAAOC,kBAAkB,CAAC,CAAC;MAC7B,KAAK,WAAW;QACd,OAAOC,oBAAoB,CAAC,CAAC;MAC/B;QACE,oBAAOrF,OAAA;UAAA6E,QAAA,EAAK;QAA2B;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC;IACjD;EACF,CAAC;;EAED;EACA,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;IAC9B,oBACElF,OAAA;MAAK4E,SAAS,EAAC,mCAAmC;MAAAC,QAAA,gBAChD7E,OAAA;QAAI4E,SAAS,EAAC,4BAA4B;QAAAC,QAAA,EAAC;MAAgB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAChEjF,OAAA;QAAG4E,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAAC;MAGlC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAEJjF,OAAA;QAAMsF,QAAQ,EAAEjC,kBAAmB;QAACuB,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACvD7E,OAAA;UAAA6E,QAAA,gBACE7E,OAAA;YAAO4E,SAAS,EAAC,8CAA8C;YAAAC,QAAA,EAAC;UAEhE;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACRjF,OAAA;YAAK4E,SAAS,EAAC,gBAAgB;YAAAC,QAAA,gBAC7B7E,OAAA;cAAO4E,SAAS,EAAC,mBAAmB;cAAAC,QAAA,gBAClC7E,OAAA;gBACEyD,IAAI,EAAC,OAAO;gBACZR,IAAI,EAAC,MAAM;gBACXC,KAAK,EAAC,MAAM;gBACZqC,OAAO,EAAE3D,UAAU,CAACR,IAAI,KAAK,MAAO;gBACpCoE,QAAQ,EAAEzC,kBAAmB;gBAC7B6B,SAAS,EAAC,iDAAiD;gBAC3Da,QAAQ;cAAA;gBAAAX,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACT,CAAC,eACFjF,OAAA;gBAAM4E,SAAS,EAAC,MAAM;gBAAAC,QAAA,EAAC;cAAO;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChC,CAAC,eACRjF,OAAA;cAAO4E,SAAS,EAAC,mBAAmB;cAAAC,QAAA,gBAClC7E,OAAA;gBACEyD,IAAI,EAAC,OAAO;gBACZR,IAAI,EAAC,MAAM;gBACXC,KAAK,EAAC,OAAO;gBACbqC,OAAO,EAAE3D,UAAU,CAACR,IAAI,KAAK,OAAQ;gBACrCoE,QAAQ,EAAEzC,kBAAmB;gBAC7B6B,SAAS,EAAC;cAAiD;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC5D,CAAC,eACFjF,OAAA;gBAAM4E,SAAS,EAAC,MAAM;gBAAAC,QAAA,EAAC;cAAM;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/B,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAENjF,OAAA;UAAA6E,QAAA,gBACE7E,OAAA;YAAO4E,SAAS,EAAC,8CAA8C;YAAAC,QAAA,EAAC;UAEhE;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACRjF,OAAA;YACEyD,IAAI,EAAC,OAAO;YACZR,IAAI,EAAC,YAAY;YACjByC,GAAG,EAAC,GAAG;YACPC,GAAG,EAAC,IAAI;YACRzC,KAAK,EAAEtB,UAAU,CAACN,UAAW;YAC7BkE,QAAQ,EAAEzC,kBAAmB;YAC7B6B,SAAS,EAAC;UAAkE;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7E,CAAC,eACFjF,OAAA;YAAK4E,SAAS,EAAC,4CAA4C;YAAAC,QAAA,gBACzD7E,OAAA;cAAA6E,QAAA,EAAM;YAAG;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAChBjF,OAAA;cAAA6E,QAAA,EAAM;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACnBjF,OAAA;cAAA6E,QAAA,EAAM;YAAI;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACd,CAAC,eACNjF,OAAA;YAAK4E,SAAS,EAAC,kBAAkB;YAAAC,QAAA,eAC/B7E,OAAA;cAAM4E,SAAS,EAAC,aAAa;cAAAC,QAAA,EAAEjD,UAAU,CAACN;YAAU;cAAAwD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAENjF,OAAA;UAAA6E,QAAA,gBACE7E,OAAA;YAAO4E,SAAS,EAAC,8CAA8C;YAAAC,QAAA,EAAC;UAEhE;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACRjF,OAAA;YACEiD,IAAI,EAAC,WAAW;YAChBC,KAAK,EAAEtB,UAAU,CAACE,SAAU;YAC5B0D,QAAQ,EAAEzC,kBAAmB;YAC7B6B,SAAS,EAAC,aAAa;YACvBa,QAAQ;YAAAZ,QAAA,EAEPnE,eAAe,CAACkF,GAAG,CAAEC,KAAK,iBACzB7F,OAAA;cAA8BkD,KAAK,EAAE2C,KAAK,CAAC/D,SAAU;cAAA+C,QAAA,GAClDgB,KAAK,CAACC,MAAM,EAAC,KAAG,EAACD,KAAK,CAAC5C,IAAI;YAAA,GADjB4C,KAAK,CAAC/D,SAAS;cAAAgD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAEpB,CACT;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eAENjF,OAAA;UAAA6E,QAAA,gBACE7E,OAAA;YAAO4E,SAAS,EAAC,8CAA8C;YAAAC,QAAA,EAAC;UAEhE;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACRjF,OAAA;YACEyD,IAAI,EAAC,QAAQ;YACbR,IAAI,EAAC,aAAa;YAClBC,KAAK,EAAEtB,UAAU,CAACG,WAAY;YAC9ByD,QAAQ,EAAEzC,kBAAmB;YAC7BgD,IAAI,EAAC,OAAO;YACZL,GAAG,EAAC,OAAO;YACXd,SAAS,EAAC,aAAa;YACvBa,QAAQ;UAAA;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC,eACFjF,OAAA;YAAG4E,SAAS,EAAC,4BAA4B;YAAAC,QAAA,EAAC;UAE1C;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC,eAENjF,OAAA;UAAK4E,SAAS,EAAC,MAAM;UAAAC,QAAA,eACnB7E,OAAA,CAACZ,MAAM,CAAC4G,MAAM;YACZvC,IAAI,EAAC,QAAQ;YACbwC,UAAU,EAAE;cAAEC,KAAK,EAAE;YAAK,CAAE;YAC5BC,QAAQ,EAAE;cAAED,KAAK,EAAE;YAAK,CAAE;YAC1BE,QAAQ,EAAExF,SAAU;YACpBgE,SAAS,EAAC,oBAAoB;YAAAC,QAAA,EAE7BjE,SAAS,GAAG,eAAe,GAAG;UAAa;YAAAkE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/B;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACb,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC;EAEV,CAAC;;EAED;EACA,MAAME,iBAAiB,GAAGA,CAAA,KAAM;IAC9B,oBACEnF,OAAA;MAAK4E,SAAS,EAAC,mCAAmC;MAAAC,QAAA,gBAChD7E,OAAA;QAAI4E,SAAS,EAAC,4BAA4B;QAAAC,QAAA,EAAC;MAAgB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAChEjF,OAAA;QAAG4E,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAAC;MAGlC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,EAEH/D,WAAW,gBACVlB,OAAA;QAAK4E,SAAS,EAAC,yDAAyD;QAAAC,QAAA,eACtE7E,OAAA;UAAG4E,SAAS,EAAC,gBAAgB;UAAAC,QAAA,EAAC;QAG9B;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,gBAENjF,OAAA;QAAK4E,SAAS,EAAC,2DAA2D;QAAAC,QAAA,eACxE7E,OAAA;UAAG4E,SAAS,EAAC,iBAAiB;UAAAC,QAAA,EAAC;QAG/B;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CACN,eAEDjF,OAAA;QAAMsF,QAAQ,EAAE5B,kBAAmB;QAACkB,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACvD7E,OAAA;UAAA6E,QAAA,gBACE7E,OAAA;YAAO4E,SAAS,EAAC,8CAA8C;YAAAC,QAAA,EAAC;UAEhE;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACRjF,OAAA;YAAK4E,SAAS,EAAC,gBAAgB;YAAAC,QAAA,gBAC7B7E,OAAA;cAAO4E,SAAS,EAAC,mBAAmB;cAAAC,QAAA,gBAClC7E,OAAA;gBACEyD,IAAI,EAAC,OAAO;gBACZR,IAAI,EAAC,MAAM;gBACXC,KAAK,EAAC,MAAM;gBACZqC,OAAO,EAAEvD,UAAU,CAACZ,IAAI,KAAK,MAAO;gBACpCoE,QAAQ,EAAEpC,kBAAmB;gBAC7BwB,SAAS,EAAC,iDAAiD;gBAC3Da,QAAQ;cAAA;gBAAAX,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACT,CAAC,eACFjF,OAAA;gBAAM4E,SAAS,EAAC,MAAM;gBAAAC,QAAA,EAAC;cAAO;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChC,CAAC,eACRjF,OAAA;cAAO4E,SAAS,EAAC,mBAAmB;cAAAC,QAAA,gBAClC7E,OAAA;gBACEyD,IAAI,EAAC,OAAO;gBACZR,IAAI,EAAC,MAAM;gBACXC,KAAK,EAAC,OAAO;gBACbqC,OAAO,EAAEvD,UAAU,CAACZ,IAAI,KAAK,OAAQ;gBACrCoE,QAAQ,EAAEpC,kBAAmB;gBAC7BwB,SAAS,EAAC;cAAiD;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC5D,CAAC,eACFjF,OAAA;gBAAM4E,SAAS,EAAC,MAAM;gBAAAC,QAAA,EAAC;cAAM;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/B,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAENjF,OAAA;UAAA6E,QAAA,gBACE7E,OAAA;YAAO4E,SAAS,EAAC,8CAA8C;YAAAC,QAAA,EAAC;UAEhE;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACRjF,OAAA;YACEyD,IAAI,EAAC,OAAO;YACZR,IAAI,EAAC,YAAY;YACjByC,GAAG,EAAC,GAAG;YACPC,GAAG,EAAC,IAAI;YACRzC,KAAK,EAAElB,UAAU,CAACV,UAAW;YAC7BkE,QAAQ,EAAEpC,kBAAmB;YAC7BwB,SAAS,EAAC;UAAkE;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7E,CAAC,eACFjF,OAAA;YAAK4E,SAAS,EAAC,kBAAkB;YAAAC,QAAA,eAC/B7E,OAAA;cAAM4E,SAAS,EAAC,aAAa;cAAAC,QAAA,EAAE7C,UAAU,CAACV;YAAU;cAAAwD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAENjF,OAAA;UAAA6E,QAAA,gBACE7E,OAAA;YAAO4E,SAAS,EAAC,8CAA8C;YAAAC,QAAA,EAAC;UAEhE;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACRjF,OAAA;YACEyD,IAAI,EAAC,MAAM;YACXR,IAAI,EAAC,MAAM;YACXC,KAAK,EAAElB,UAAU,CAACE,IAAK;YACvBsD,QAAQ,EAAEpC,kBAAmB;YAC7BwB,SAAS,EAAC,aAAa;YACvBa,QAAQ;UAAA;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC,eACFjF,OAAA;YAAG4E,SAAS,EAAC,4BAA4B;YAAAC,QAAA,EAAC;UAE1C;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC,eAENjF,OAAA;UAAK4E,SAAS,EAAC,MAAM;UAAAC,QAAA,eACnB7E,OAAA,CAACZ,MAAM,CAAC4G,MAAM;YACZvC,IAAI,EAAC,QAAQ;YACbwC,UAAU,EAAE;cAAEC,KAAK,EAAE;YAAK,CAAE;YAC5BC,QAAQ,EAAE;cAAED,KAAK,EAAE;YAAK,CAAE;YAC1BE,QAAQ,EAAExF,SAAU;YACpBgE,SAAS,EAAC,oBAAoB;YAAAC,QAAA,EAE7BjE,SAAS,GAAG,eAAe,GAAG;UAAa;YAAAkE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/B;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACb,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC;EAEV,CAAC;;EAED;EACA,MAAMG,kBAAkB,GAAGA,CAAA,KAAM;IAC/B,oBACEpF,OAAA;MAAK4E,SAAS,EAAC,mCAAmC;MAAAC,QAAA,gBAChD7E,OAAA;QAAI4E,SAAS,EAAC,4BAA4B;QAAAC,QAAA,EAAC;MAAmB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACnEjF,OAAA;QAAG4E,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAAC;MAGlC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAEJjF,OAAA,CAACZ,MAAM,CAAC4G,MAAM;QACZC,UAAU,EAAE;UAAEC,KAAK,EAAE;QAAK,CAAE;QAC5BC,QAAQ,EAAE;UAAED,KAAK,EAAE;QAAK,CAAE;QAC1BG,OAAO,EAAEzC,cAAe;QACxBwC,QAAQ,EAAExF,SAAU;QACpBgE,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAE7BjE,SAAS,GAAG,eAAe,GAAG;MAAiB;QAAAkE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACb,CAAC;EAEV,CAAC;;EAED;EACA,MAAMI,oBAAoB,GAAGA,CAAA,KAAM;IACjC,MAAMiB,MAAM,GAAGpG,OAAO,CAACqG,iBAAiB,IAAI,CAAC,CAAC;IAC9C,MAAMC,aAAa,GAAGF,MAAM,CAACE,aAAa,KAAK,CAAC,GAAG,UAAU,GAAG,UAAU;IAE1E,oBACExG,OAAA;MAAK4E,SAAS,EAAC,mCAAmC;MAAAC,QAAA,gBAChD7E,OAAA;QAAI4E,SAAS,EAAC,4BAA4B;QAAAC,QAAA,EAAC;MAAgB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAChEjF,OAAA;QAAG4E,SAAS,EAAC,oBAAoB;QAAAC,QAAA,GAAC,wBACV,EAAC2B,aAAa,CAACC,WAAW,CAAC,CAAC,EAAC,oBACrD;MAAA;QAAA3B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAEJjF,OAAA;QAAK4E,SAAS,EAAC,gBAAgB;QAAAC,QAAA,gBAC7B7E,OAAA;UAAK4E,SAAS,EAAC,sBAAsB;UAAAC,QAAA,gBACnC7E,OAAA;YAAM4E,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAC;UAAO;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC9CjF,OAAA;YAAM4E,SAAS,EAAC,aAAa;YAAAC,QAAA,EAAE2B;UAAa;YAAA1B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjD,CAAC,eACNjF,OAAA;UAAK4E,SAAS,EAAC,sBAAsB;UAAAC,QAAA,gBACnC7E,OAAA;YAAM4E,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAC;UAAmB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC1DjF,OAAA;YAAM4E,SAAS,EAAC,aAAa;YAAAC,QAAA,EAAEyB,MAAM,CAACI,iBAAiB,IAAI;UAAC;YAAA5B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjE,CAAC,eACNjF,OAAA;UAAK4E,SAAS,EAAC,sBAAsB;UAAAC,QAAA,gBACnC7E,OAAA;YAAM4E,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAC;UAAuB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC9DjF,OAAA;YAAM4E,SAAS,EAAC,aAAa;YAAAC,QAAA,GAAC,GAAC,EAACyB,MAAM,CAACK,aAAa,IAAI,CAAC;UAAA;YAAA7B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9D,CAAC,eACNjF,OAAA;UAAK4E,SAAS,EAAC,sBAAsB;UAAAC,QAAA,gBACnC7E,OAAA;YAAM4E,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAC;UAAa;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACpDjF,OAAA;YAAM4E,SAAS,EAAC,aAAa;YAAAC,QAAA,EAC1BjF,UAAU,CAACM,OAAO,CAAC0G,WAAW;UAAC;YAAA9B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5B,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV,CAAC;EAED,oBACEjF,OAAA;IAAA6E,QAAA,GACG/D,KAAK,iBACJd,OAAA,CAACZ,MAAM,CAACyH,GAAG;MACTC,OAAO,EAAE;QAAEC,OAAO,EAAE,CAAC;QAAEC,CAAC,EAAE,CAAC;MAAG,CAAE;MAChCC,OAAO,EAAE;QAAEF,OAAO,EAAE,CAAC;QAAEC,CAAC,EAAE;MAAE,CAAE;MAC9BpC,SAAS,EAAC,6CAA6C;MAAAC,QAAA,EAEtD/D;IAAK;MAAAgE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACI,CACb,EAEAjE,OAAO,iBACNhB,OAAA,CAACZ,MAAM,CAACyH,GAAG;MACTC,OAAO,EAAE;QAAEC,OAAO,EAAE,CAAC;QAAEC,CAAC,EAAE,CAAC;MAAG,CAAE;MAChCC,OAAO,EAAE;QAAEF,OAAO,EAAE,CAAC;QAAEC,CAAC,EAAE;MAAE,CAAE;MAC9BpC,SAAS,EAAC,iDAAiD;MAAAC,QAAA,EAE1D7D;IAAO;MAAA8D,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CACb,EAEAvD,YAAY,IAAI,CAACA,YAAY,CAACwF,SAAS,iBACtClH,OAAA;MAAK4E,SAAS,EAAC,4CAA4C;MAAAC,QAAA,gBACzD7E,OAAA;QAAI4E,SAAS,EAAC,0DAA0D;QAAAC,QAAA,EAAC;MAEzE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACLjF,OAAA;QAAK4E,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACxB7E,OAAA;UAAK4E,SAAS,EAAC,0CAA0C;UAAAC,QAAA,gBACvD7E,OAAA;YAAG4E,SAAS,EAAC,2CAA2C;YAAAC,QAAA,EACrDnD,YAAY,CAACN,IAAI,GAAG,UAAU,GAAG;UAAU;YAAA0D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3C,CAAC,eACJjF,OAAA;YAAG4E,SAAS,EAAC,0CAA0C;YAAAC,QAAA,GAAC,cAC1C,EAACnD,YAAY,CAACJ,UAAU,EAAC,KACvC;UAAA;YAAAwD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eACJjF,OAAA;YAAG4E,SAAS,EAAC,+CAA+C;YAAAC,QAAA,GAAC,aAChD,EAAC,IAAIZ,IAAI,CAACvC,YAAY,CAACsC,SAAS,CAAC,CAACmD,cAAc,CAAC,CAAC;UAAA;YAAArC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5D,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC,eACNjF,OAAA;UAAG4E,SAAS,EAAC,sDAAsD;UAAAC,QAAA,EAAC;QAEpE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,EAEAN,qBAAqB,CAAC,CAAC,eAExB3E,OAAA;MAAK4E,SAAS,EAAC,MAAM;MAAAC,QAAA,eACnB7E,OAAA;QACEqG,OAAO,EAAExC,gBAAiB;QAC1BuC,QAAQ,EAAE5E,YAAY,IAAIJ,IAAI,KAAK,IAAK;QACxCwD,SAAS,EAAE;AACrB;AACA,cACcpD,YAAY,GACR,gCAAgC,GAChC,qCAAqC;AACvD;AACA,WACY;QAAAqD,QAAA,EAEDrD,YAAY,gBACXxB,OAAA;UAAK4E,SAAS,EAAC,kCAAkC;UAAAC,QAAA,gBAC/C7E,OAAA;YAAK4E,SAAS,EAAC;UAAmF;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,iBAE3G;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,GACJvD,YAAY,GACd,aAAa,GAEb;MACD;QAAAoD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACK;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC7E,EAAA,CA/pBIH,eAAe;EAAA,QACsBZ,SAAS;AAAA;AAAA+H,EAAA,GAD9CnH,eAAe;AAiqBrB,eAAeA,eAAe;AAAC,IAAAmH,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}